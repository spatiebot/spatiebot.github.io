!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([,,function(t,e,i){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o={announce:function(t){o.log("Announce: "+t),Network.sendChat(t)},calcDiff:function(t,e){var i=e.x-t.x,s=e.y-t.y;return{diffX:i,diffY:s,distance:Math.sqrt(i*i+s*s)}},decodeHtml:function(t){var e=o;return e.htmlDecodeHelper=e.htmlDecodeHelper||document.createElement("textarea"),e.htmlDecodeHelper.innerHTML=t,e.htmlDecodeHelper.value},getDeltaTo:function(t){t=t||this.state.victim;var e=o.getPosition(t),i=Players.getMe().pos;return s({},o.calcDiff(i,e),{isAccurate:e.isAccurate})},getPosition:function(t){var e=!0,i=t.pos;return t.lowResPos&&(i=(e=o.calcDiff(t.lowResPos,t.pos).distance<900)?i:t.lowResPos),{x:i.x,y:i.y,isAccurate:e}},getHostilePlayersSortedByDistance:function(t,e){var i=this;void 0===t&&(t=null),void 0===e&&(e=null);var s=o.getPlayers().filter(function(i){return i.team!==game.myTeam&&i.id!==t&&(!e||e.indexOf(i.id)>-1)});return s.sort(function(t,e){var s=i.getDeltaTo(t),o=i.getDeltaTo(e);return s.isAccurate&&!o.isAccurate?-1:!s.isAccurate&&o.isAccurate?1:s.distance<o.distance?-1:o.distance<s.distance?1:0}),s},getPlayers:function(){var t=[],e=Players.getIDs();for(var i in e)if(e.hasOwnProperty(i)){var s=Players.get(i);s&&t.push(s)}return t},getRandomNumber:function(t,e){return t+Math.floor(Math.random()*(e-t))},log:function(t){var e=o;if(o.shouldLog){e.logger||(e.logger=document.createElement("div"),document.body.appendChild(e.logger),e.logger.style="position: absolute; top: 50px; left: 300px; color: white: width: 600px; height: 500px; overflow: scroll");var i=document.createElement("div");i.innerText=t,e.logger.insertBefore(i,e.logger.firstChild),e.logger.childElementCount>100&&e.logger.removeChild(e.logger.lastChild)}else e.logger&&(document.body.removeChild(e.logger),e.logger=null);o.shouldLogToConsole&&console.log(t)},shouldLog:!1,shouldLogToConsole:!1};e.Spatie=o},,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(2),o=i(10);!function(){var t=null,e=!1,i="b",a=!1,n=!1;SWAM.registerExtension({name:"SpatieBot 4.2",id:"spatie042",description:"Runs one bot",author:"Spatie",version:"4.2",settingsProvider:function(){var t=new SettingsProvider({limitUpdates:!1,toggleKey:"b",logChat:!1,useInsults:!1},function(t){e=t.limitUpdates,i=t.toggleKey,a=t.logChat,n=t.useInsults}),s=t.addSection("SpatieBot settings");return s.addBoolean("limitUpdates","Don't update screen when window doesn't have focus (for hosting many bots)"),s.addBoolean("logChat","Log chat to console"),s.addBoolean("useInsults","Insult 1 of 4 killing this bot"),s.addString("toggleKey","Key to press to toggle the bot",{maxLength:1}),t}()}),SWAM.on("gamePrep",function(){console.log("Press '"+i+"' to toggle bot");var s=Mobs.add;Mobs.add=function(e,i,o){s.apply(null,arguments),t&&t.onMobAdd(o,e)};var o=UI.updateUpgrades;UI.updateUpgrades=function(e,i,s){o.apply(null,arguments),t&&(t.upgradeInfo.availableUpgrades=i,t.upgradeInfo.upgradeStats=e)};var a=UI.showMessage;UI.showMessage=function(e,i,s){a.apply(null,arguments),/upgrade/.exec(i)&&t&&(t.upgradeInfo.availableUpgrades=t.upgradeInfo.availableUpgrades||0,t.upgradeInfo.availableUpgrades+=1)};var n=Graphics.render;Graphics.render=function(){e&&!document.hasFocus()||n.apply(null,arguments)}}),SWAM.on("keyup",function(e){var a=e.originalEvent.key;a!==i.toLocaleUpperCase()&&a!==i.toLocaleLowerCase()||(t?(t.dispose(),t=null):(t=function(){var t=new o.SpatieBot;return window.Spatie=s.Spatie,window.SpatieBot=t,t}()).initialize())}),SWAM.on("playerImpacted",function(e){var i=e.owner,s=e.players[0].id;t&&s===game.myID&&t.onHit(i)}),SWAM.on("playerKilled",function(e,i,s){t&&t.onPlayerKilled(i.id,s.id,n)}),SWAM.on("chatLineAdded",function(e,i,s){if(a&&console.log(e.name+": "+i),t)if("-sb-bond"===i)t.toggleBonding();else if("-sb-target"===i)t.announceTarget();else{var o=/-sb-suggest[: ]+(.*)/.exec(i);if(o){var n=o[1];t.suggestVictim(e.id,n)}else{var r=/-sb-config[: ]+(.*)/.exec(i);r&&e.id===game.myID&&t.switchConfig(r[1])}}})}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,o=i(11),a=i(2),n=i(12),r=i(13),l=i(14),h=i(15),c=i(16),u=i(17),d=new o.BotConfigFactory,p={availableUpgrades:0,upgradeStats:{}},g=[],f=function(){function t(){this.botNavigationHub=new c.BotNavigationHub,this.upgradeInfo=p}return t.prototype.announceTarget=function(){if(this.isOn()){var t=this.state.victim,e=t?t.name:"(no target)";a.Spatie.announce("Target: "+e)}},t.prototype.dispose=function(){this.state&&this.state.heartbeatInterval&&(clearInterval(this.state.heartbeatInterval),this.commandExecutor.clearCommands(),this.botNavigationHub.destroy(),this.commandExecutor=null,this.botNavigationHub=null,this.victimSelection=null,this.state=null)},t.prototype.goto=function(t,e){this.state.gotoCoords={x:t,y:e}},t.prototype.initialize=function(t){var e=this;void 0===t&&(t=null),this.isOn()||(s&&s.aircraftType!==Players.getMe().type&&(s=null),t=t||s||d.getConfigByAircraftType(Players.getMe().type),s=t,this.config=t,this.state=new n.SpatiebotState,this.commandExecutor=new r.SpatiebotCommandExecutor(this.state,this.config),this.victimSelection=new l.SpatiebotVictimSelection(this.state,this.config,g),this.botNavigationHub=new c.BotNavigationHub,a.Spatie.log("Starting bot of type "+this.config.name),this.config.bondingTimes>0&&(this.config.bondingTimes=this.config.bondingTimes-1),this.state.heartbeatInterval=setInterval(function(){return e.heartbeat()},this.config.heartbeatInterval))},t.prototype.logState=function(){if(this.isOn())try{a.Spatie.log(JSON.stringify(this.state))}catch(t){console.log(this.state)}else a.Spatie.log("(no state: bot is off)")},t.prototype.onHit=function(t){if(this.isOn()){var e=g.filter(function(e){return e.id===t})[0];e||(e=new h.PlayerStat(t),g.push(e)),e.addHit()}},t.prototype.onMobAdd=function(t,e){if(this.isOn()&&t!==game.myID){[1,2,3,5,6,7].indexOf(e.type)>-1?this.onMissileFired(e.id):[4,8,9].indexOf(e.type)>-1&&this.onPowerupDetected(e.id)}},t.prototype.onPlayerKilled=function(t,e,i){var s=this;if(this.isOn())if(t===game.myID){if(a.Spatie.log("I was killed. Restarting."),this.dispose(),setTimeout(function(){return s.initialize()},this.config.respawnTimeout),i&&0===a.Spatie.getRandomNumber(0,3)){var o=Players.get(e).name,n=u.getInsult();a.Spatie.announce(o+", you "+n.toLocaleLowerCase())}}else this.state.victim&&t===this.state.victim.id&&(a.Spatie.log("Victim was killed, choosing another victim."),this.state.victim=null,this.state.pathToVictim=null)},t.prototype.switchConfig=function(t){if(this.config.name!==t){var e=d.getConfigByName(t);e&&(this.dispose(),this.initialize(e))}},t.prototype.toggleBonding=function(){this.isOn()&&(this.config.bondingTimes?(this.config.bondingTimes=null,a.Spatie.announce("Every SpatieBot for itself")):(this.config.bondingTimes=3,this.state.victim=null,a.Spatie.announce("All SpatieBots, unite!")))},t.prototype.suggestVictim=function(t,e){if(this.isOn()){var i=Players.getByName(e);i&&i.id!==game.myID&&(this.state.suggestedVictimID=i.id,this.state.suggestingPlayerID=t)}},t.prototype.applyUpgrades=function(){var t=this,e=!1;this.state.lastUpgradeApplicationTime&&(e=Date.now()-this.state.lastUpgradeApplicationTime<5e3);var i=this.upgradeInfo.availableUpgrades>=5,s=Players.getMe().health>=.9;if(!e&&i&&s){var o=0;this.state.lastUpgradeApplicationTime=Date.now();var a=setInterval(function(){Network.sendCommand("upgrade",t.config.applyUpgradesTo+""),5===(o+=1)&&clearInterval(a)},400)}},t.prototype.approachCoords=function(){var t={pos:this.state.gotoCoords};this.turnTo(t),a.Spatie.getDeltaTo(t).distance>this.config.distanceClose?(this.setFastMovement(!0),this.setSpeedMovement("UP")):(this.setFastMovement(!1),this.setSpeedMovement(null),this.state.gotoCoords=null)},t.prototype.approachMob=function(){this.setSpeedMovement("UP"),this.state.mob.delta.distance>this.config.distanceTooClose&&this.setFastMovement(!0)},t.prototype.approachVictim=function(){var t=this.state.victim;if(t){var e,i=a.Spatie.getDeltaTo(t);this.setFastMovement(!1),this.state.isVictimPoweredUp&&i.distance<this.config.distanceNear&&!this.hasShield()?e="DOWN":i.distance>this.config.distanceFar?(Players.getMe().health>this.config.fleeHealthThresholdMax&&this.setFastMovement(!0),e="UP"):e=i.distance>this.config.distanceTooClose?"UP":"DOWN",this.setSpeedMovement(e)}else this.setSpeedMovement(null)},t.prototype.detectFlagTaken=function(){this.state.flagCarrierID=null;var t=n($("#blueflag-name").html()),e=n($("#redflag-name").html());if(t||e){var i=Players.getMe(),s=Players.getByName(t);s&&s.team!==i.team&&(this.state.flagCarrierID=s.id);var o=Players.getByName(e);o&&o.team!==i.team&&(this.state.flagCarrierID=o.id)}function n(t){var e=/([^<]+)</.exec(t);return e?a.Spatie.decodeHtml(e[1]):null}},t.prototype.detectDangerousObjects=function(){if(this.state.objectToFleeFromID=null,!this.hasShield()){var t=this.state.missileIDs||[];this.state.missileIDs=[];for(var e=[],i=0;i<t.length;i++){var s=Mobs.get(t[i]);s&&(e.push(s),s.delta=null)}var o=this.config.fleeHealthThresholdMax/Players.getMe().health;if(e.length>0){var n=Players.getMe().pos;e.sort(function(t,e){var i=t.delta||a.Spatie.calcDiff(n,t.pos),s=e.delta||a.Spatie.calcDiff(n,e.pos);return t.delta=i,e.delta=s,i.distance<s.distance?-1:s.distance<i.distance?1:0});var r=e[0],l=r.delta||a.Spatie.calcDiff(n,r.pos),h=r.exhaust/18,c=this.config.distanceMissileDangerous*h*o;l.distance<c&&(this.state.objectToFleeFromID=r.id)}for(var u=e.map(function(t){return t.id}),d=0;d<u.length;d++)this.state.missileIDs.push(u[d]);if(!this.state.objectToFleeFromID){var p=this.state.victim?this.state.victim.id:null,f=void 0;this.config.offensive||(f=g.filter(function(t){return t.isAgressive}).map(function(t){return t.id}));var m=a.Spatie.getHostilePlayersSortedByDistance(p,f)[0];if(m){l=a.Spatie.getDeltaTo(m),c=o*this.config.distanceTooClose;l.isAccurate&&l.distance<c&&(this.state.objectToFleeFromID=m.id)}}this.state.objectToFleeFromID&&this.clearPathFinding()}},t.prototype.detectShouldFlee=function(){this.hasShield()||Players.getMe().health<this.config.fleeHealthThresholdMin&&(this.state.isFleeing=!0,this.clearPathFinding())},t.prototype.detectStuckness=function(){if(!this.state.isStuck){var t=Players.getMe(),e=t.speed;if(Math.abs(e.x)<1&&Math.abs(e.y)<1&&t.state.thrustLevel>0){if(this.state.stucknessTimeout?this.state.stucknessTimeout=this.state.stucknessTimeout-this.config.heartbeatInterval:this.state.stucknessTimeout=Date.now()+this.config.stucknessTimeoutMs,this.state.stucknessTimeout<=0){this.state.stucknessTimeout=null,this.state.isStuck=!0,this.clearPathFinding();var i=a.Spatie.getRandomNumber(0,250);this.state.stuckTimeStopTurning=Date.now()+this.config.stucknessTurnDurationMs-i,this.state.stuckTimeStopFlying=Date.now()+this.config.stucknessFlyDurationMs+i,this.state.detectedPowerUps&&this.state.detectedPowerUps.length>0&&(this.state.detectedPowerUps=null);var s=Math.atan2(0,-1),o=a.Spatie.getRandomNumber(.3*s*100,.4*s*100)/100,n=a.Spatie.getRandomNumber(0,2);n=0===n?-1:1,this.setDesiredAngle(Players.getMe().rot+n*o)}}else this.state.stucknessTimeout=this.state.stucknessTimeout+this.config.heartbeatInterval,this.state.stucknessTimeout>this.config.stucknessTimeoutMs&&(this.state.stucknessTimeout=null)}},t.prototype.detectVictimPowerUps=function(){this.state.isVictimPoweredUp=!1,this.state.victim&&(this.state.victim.powerups.rampage||this.state.victim.powerups.shield)&&(this.state.isVictimPoweredUp=!0)},t.prototype.fireAtVictim=function(){if(this.config.fireConstantly)this.setFire(!0,null);else{var t=this.state.isFleeing;if(!t)t=this.hasRampage();if(!t)if(this.state.victim)t=a.Spatie.getDeltaTo(this.state.victim).distance<this.config.distanceNear;var e=1e3;this.state.isFleeing&&(e=200),this.setFire(t,e)}},t.prototype.fleeFrom=function(t){var e=Players.getMe(),i=a.Spatie.calcDiff(e.pos,t.pos);if("WHOMP"===this.config.useSpecial&&e.energy>.4&&i.distance<this.config.distanceMissileDangerous)return this.setWhomp(),void a.Spatie.log("WHOMPING, energy level "+e.energy);var s=Math.atan2(i.diffX,-i.diffY),o=Math.atan2(0,-1);s<0&&(s=2*o+s),this.setDesiredAngle(s),this.setFastMovement(!0),this.setSpeedMovement("DOWN")},t.prototype.handleFlee=function(){if(Players.getMe().health>this.config.fleeHealthThresholdMax||this.hasShield())this.state.isFleeing=!1;else{var t=a.Spatie.getHostilePlayersSortedByDistance()[0];if(t)a.Spatie.getDeltaTo(t).distance>2*this.config.distanceFar?this.state.isFleeing=!1:this.fleeFrom(t);else this.state.isFleeing=!1}},t.prototype.handleObjectToFleeFrom=function(){var t=Mobs.get(this.state.objectToFleeFromID);t||(t=Players.get(this.state.objectToFleeFromID)),t&&!this.hasShield()&&this.fleeFrom(t)},t.prototype.handleStuckness=function(){var t=Date.now();t<this.state.stuckTimeStopFlying?this.setSpeedMovement("DOWN"):t>=this.state.stuckTimeStopFlying&&(this.setSpeedMovement(null),this.state.isStuck=!1)},t.prototype.clearPathFinding=function(){this.state.pathToMob=null,this.state.pathToVictim=null,this.state.startedFindingPathToMob=null,this.state.startedFindingPathToVictim=null},t.prototype.hasRampage=function(){return Players.getMe().powerups.rampage},t.prototype.hasShield=function(){return Players.getMe().powerups.shield},t.prototype.heartbeat=function(){this.state.previous=this.state.name,this.state.isStuck?(this.state.name="stuck",this.handleStuckness()):this.state.objectToFleeFromID?(this.state.name="flee from object",this.detectStuckness(),this.handleObjectToFleeFrom()):this.state.isFleeing?(this.state.name="low health flee",this.detectStuckness(),this.handleFlee()):this.state.gotoCoords?(this.state.name="go to coords",this.approachCoords(),this.detectStuckness(),this.detectShouldFlee()):!this.state.victim||!this.state.startedFindingPathToVictim||this.state.pathToVictim&&0!==this.state.pathToVictim.length?!this.state.mob||!this.state.startedFindingPathToMob||this.state.pathToMob&&0!==this.state.pathToMob.length?this.state.mob?(this.state.name="chase mob",this.findPathToMob(),this.followPathDirectionToMob(),this.approachMob(),this.detectShouldFlee()):this.state.victim?(this.state.name="chase victim "+this.state.victim.name,this.findPathToVictim(),this.followPathDirectionToVictim(),this.approachVictim(),this.fireAtVictim(),this.detectVictimPowerUps(),this.detectShouldFlee(),this.detectFlagTaken(),this.victimSelection.selectVictim()):(this.state.name="finding life purpose",this.detectFlagTaken(),this.victimSelection.selectVictim()):(this.state.name="finding path to mob",this.findPathToMob(),this.temporaryMoveToMob(),this.detectStuckness(),this.detectShouldFlee()):(this.state.name="finding path to victim",this.findPathToVictim(),this.temporaryMoveToVictim(),this.detectStuckness(),this.detectShouldFlee()),this.state.name!==this.state.previous&&a.Spatie.log(this.state.name),this.applyUpgrades(),this.detectAwayFromHome(),this.detectDangerousObjects(),this.commandExecutor.executeCommands(),this.detectMobs()},t.prototype.temporaryMoveToVictim=function(){this.state.victim&&(this.turnTo(this.state.victim),this.approachVictim())},t.prototype.temporaryMoveToMob=function(){this.state.mob&&(this.turnTo(this.state.mob),this.approachMob())},t.prototype.detectMobs=function(){if(this.state.detectedPowerUps&&0!==this.state.detectedPowerUps.length){for(var t,e=[],i=0;i<this.state.detectedPowerUps.length;i++){var s=Mobs.get(this.state.detectedPowerUps[i]);s&&(e.push(s.id),s.delta=a.Spatie.getDeltaTo(s),s.delta.distance<=2*this.config.distanceFar&&(!t||t.delta.distance>s.delta.distance)&&(t=s))}t!==this.state.mob&&this.clearPathFinding(),this.state.mob=t,this.state.detectedPowerUps=e}},t.prototype.findPathToVictim=function(){var t=this;if(this.botNavigationHub.isReady&&!(this.state.startedFindingPathToVictim&&Date.now()-this.state.startedFindingPathToVictim<3e3)){var e=a.Spatie.getPosition(this.state.victim);this.state.startedFindingPathToVictim=Date.now(),this.botNavigationHub.findPath(Players.getMe().pos,e,function(e){t.state.startedFindingPathToVictim=null,e.shift(),t.state.pathToVictim=e},function(e){t.state.startedFindingPathToVictim=null,t.state.pathToVictim=null,t.botNavigationHub.destroy(),t.botNavigationHub=new c.BotNavigationHub})}},t.prototype.findPathToMob=function(){var t=this;if(!(this.state.startedFindingPathToMob&&Date.now()-this.state.startedFindingPathToMob<3e3)){this.state.pathToVictim=null,this.state.startedFindingPathToVictim=null;var e=a.Spatie.getPosition(this.state.mob);this.state.startedFindingPathToMob=Date.now(),this.botNavigationHub.findPath(Players.getMe().pos,e,function(e){t.state.startedFindingPathToMob=null,e.shift(),t.state.pathToMob=e},function(e){t.state.startedFindingPathToMob=null,t.state.pathToMob=null,t.botNavigationHub.destroy(),t.botNavigationHub=new c.BotNavigationHub})}},t.prototype.detectAwayFromHome=function(){this.config.protectHomeBase&&(a.Spatie.calcDiff(Players.getMe().pos,this.config.homeBase).distance>this.config.homeBase.radius&&(this.state.gotoCoords=this.config.homeBase))},t.prototype.isOn=function(){return!!this.state},t.prototype.onMissileFired=function(t){this.isOn()&&(this.state.missileIDs=this.state.missileIDs||[],this.state.missileIDs.push(t))},t.prototype.onPowerupDetected=function(t){this.isOn()&&this.config.goForUpgrades&&(this.state.detectedPowerUps=this.state.detectedPowerUps||[],this.state.detectedPowerUps.push(t))},t.prototype.setFire=function(t,e){void 0===e&&(e=null),this.state.isFiring=t,this.state.stopFiringTimeout=e},t.prototype.setDesiredAngle=function(t){this.state.desiredAngle=t},t.prototype.setSpeedMovement=function(t){this.state.speedMovement=t},t.prototype.setFastMovement=function(t){this.state.fast=t},t.prototype.setWhomp=function(){this.state.whomp=!0},t.prototype.turnTo=function(t){var e=a.Spatie.getDeltaTo(t),i=Math.atan2(e.diffX,-e.diffY),s=Math.atan2(0,-1);i<0&&(i=2*s+i),this.setDesiredAngle(i)},t.prototype.followPathDirectionToVictim=function(){if(this.state.pathToVictim&&0!==this.state.pathToVictim.length){var t={pos:this.state.pathToVictim[0]};this.turnTo(t)}},t.prototype.followPathDirectionToMob=function(){if(this.state.pathToMob&&0!==this.state.pathToMob.length){var t={pos:this.state.pathToMob[0]};this.turnTo(t)}},t}();e.SpatieBot=f},function(t,e,i){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){return function(){}}();e.BotConfig=o;var a=function(){function t(){this.normalBotConfig={applyUpgradesTo:4,offensive:!0,bondingTimes:0,distanceFar:600,distanceNear:450,distanceClose:300,distanceTooClose:200,distanceMissileDangerous:300,fleeHealthThresholdMin:.3,fleeHealthThresholdMax:.7,fireConstantly:!1,goForUpgrades:!0,homeBase:null,heartbeatInterval:75,name:"normal",precision:.1,protectHomeBase:!1,throttleInterval:150,respawnTimeout:4e3,stucknessTurnDurationMs:500,stucknessFlyDurationMs:2e3,stucknessTimeoutMs:1500,useSpecial:"SPEED",useStealth:!1,victimExpireMs:12e4,aircraftType:1},this.squareProtectingBotConfig=s({},this.normalBotConfig,{applyUpgradesTo:2,offensive:!1,homeBase:{x:926,y:-2805,radius:500},name:"squareProtecting",protectHomeBase:!0}),this.agressiveBotConfig=s({},this.normalBotConfig,{applyUpgradesTo:4,distanceTooClose:50,distanceMissileDangerous:50,fireConstantly:!0,fleeHealthThresholdMin:.2,fleeHealthThresholdMax:.5,name:"agressive",precision:.15,stucknessTimeoutMs:1e3}),this.copterBotConfig=s({},this.normalBotConfig,{applyUpgradesTo:2,distanceTooClose:400,distanceMissileDangerous:400,fireConstantly:!0,fleeHealthThresholdMin:.5,fleeHealthThresholdMax:.9,name:"copter",useSpecial:null,aircraftType:3}),this.tornadoBotConfig=s({},this.normalBotConfig,{applyUpgradesTo:1,distanceTooClose:100,distanceMissileDangerous:200,fleeHealthThresholdMin:.5,fleeHealthThresholdMax:.9,name:"tornado",useSpecial:"FIRE",aircraftType:4}),this.prowlerBotConfig=s({},this.normalBotConfig,{distanceNear:300,distanceClose:200,distanceTooClose:50,distanceMissileDangerous:200,name:"prowler",useStealth:!0,useSpecial:"STEALTH",aircraftType:5}),this.goliathBotConfig=s({},this.normalBotConfig,{applyUpgradesTo:1,distanceNear:500,distanceClose:300,distanceTooClose:150,distanceMissileDangerous:280,fleeHealthThresholdMin:.2,fleeHealthThresholdMax:.4,name:"goliath",useSpecial:"WHOMP",aircraftType:2})}return t.prototype.getConfigByName=function(t){return[this.squareProtectingBotConfig,this.agressiveBotConfig,this.copterBotConfig,this.tornadoBotConfig,this.prowlerBotConfig,this.goliathBotConfig].filter(function(e){return e.name===t})[0]},t.prototype.getConfigByAircraftType=function(t){switch(t){case 1:return this.normalBotConfig;case 2:return this.goliathBotConfig;case 3:return this.copterBotConfig;case 4:return this.tornadoBotConfig;case 5:return this.prowlerBotConfig;default:return this.normalBotConfig}},t}();e.BotConfigFactory=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){return function(){}}();e.SpatiebotState=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(2),o=function(){function t(t,e){this.state=t,this.config=e,this.networkSendKey=Network.sendKey}return t.prototype.clearCommands=function(){Network.sendKey("LEFT",!1),Network.sendKey("RIGHT",!1),Network.sendKey("UP",!1),Network.sendKey("DOWN",!1),Network.sendKey("FIRE",!1),Network.sendKey("SPECIAL",!1)},t.prototype.isThrottleTimeElapsedFor=function(t){return!this.state.nextMovementExec[t]||Date.now()>this.state.nextMovementExec[t]},t.prototype.setThrottleTimeFor=function(t){this.state.nextMovementExec[t]=Date.now()+this.config.throttleInterval},t.prototype.isAnyThrottleTimeElapsed=function(){if(!this.state.nextMovementExec)return!0;for(var t=0,e=this.state.nextMovementExec;t<e.length;t++){var i=e[t];if(this.isThrottleTimeElapsedFor(i))return!0}return!1},t.prototype.executeCommands=function(){var t=this;this.state.nextMovementExec||(this.state.nextMovementExec={});var e,i,o=this.state.lastDesiredAngle!==this.state.desiredAngle,a=this.state.previousSpeedMovement!==this.state.speedMovement,n=this.state.previousIsFiring!==this.state.isFiring;if("WHOMP"===this.config.useSpecial&&(e=this.state.previousWhomp!==this.state.whomp),"SPEED"===this.config.useSpecial&&(i=this.state.previousFast!==this.state.fast),o||a||i||n||e||this.isAnyThrottleTimeElapsed()){if(a&&(this.state.previousSpeedMovement&&Network.sendKey(this.state.previousSpeedMovement,!1),this.state.previousSpeedMovement=this.state.speedMovement),o&&(this.state.lastDesiredAngle=this.state.desiredAngle),i&&(this.state.previousFast=this.state.fast),n&&(this.state.previousIsFiring=this.state.isFiring),isNaN(this.state.desiredAngle)||!o&&!this.isThrottleTimeElapsedFor("angle")||(this.turnToDesiredAngle(),this.setThrottleTimeFor("angle")),this.state.speedMovement&&(a||this.isThrottleTimeElapsedFor("movement"))&&(Network.sendKey(this.state.speedMovement,!0),this.setThrottleTimeFor("movement")),"SPEED"===this.config.useSpecial&&(i||this.isThrottleTimeElapsedFor("fast"))&&(this.state.fast?this.state.fastTimeout||(Network.sendKey("SPECIAL",!0),this.state.fastTimeout=setTimeout(function(){Network.sendKey("SPECIAL",!1),t.state.fastTimeout=null},1e3)):Network.sendKey("SPECIAL",!1),this.setThrottleTimeFor("fast")),n||this.isThrottleTimeElapsedFor("fire")){var r="FIRE";if("FIRE"===this.config.useSpecial&&(r="SPECIAL"),this.state.isFiring){if(Network.sendKey(r,!0),!this.config.fireConstantly&&!this.state.fireTimeout){var l=this.state.stopFiringTimeout||1200;this.state.fireTimeout=setTimeout(function(){t.state.fireTimeout=null,Network.sendKey(r,!1),t.state.isFiring=!1},l)}}else Network.sendKey(r,!1);this.setThrottleTimeFor("fire")}var h=!1;this.config.useStealth&&"STEALTH"===this.config.useSpecial&&!Players.getMe().stealthed&&(h=!0),e&&(h=!0,this.state.whomp=!1,this.state.previousWhomp=!1),h&&(s.Spatie.log("Sending special"),Network.sendKey("SPECIAL",!0),setTimeout(function(){return Network.sendKey("SPECIAL",!1)},100))}},t.prototype.turnToDesiredAngle=function(){var t=this,e=Players.getMe().rot,i=this.state.desiredAngle,s=Math.abs(e-i);if(s>this.config.precision){var o,a=Math.atan2(0,-1);e>i?o=s>a?"RIGHT":"LEFT":e<i&&(o=s>a?"LEFT":"RIGHT"),this.state.angleInterval&&clearInterval(this.state.angleInterval),Network.sendKey("LEFT"===o?"RIGHT":"LEFT",!1),Network.sendKey(o,!0);var n=setInterval(function(){var e=t.state.desiredAngle,i=Players.getMe().rot;Math.abs(i-e)<=t.config.precision&&(clearInterval(n),Network.sendKey(o,!1),t.state.desiredAngle=void 0)},50);this.state.angleInterval=n}},t}();e.SpatiebotCommandExecutor=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(2),o=function(){function t(t,e,i){this.state=t,this.config=e,this.playerStats=i}return t.prototype.selectVictim=function(){this.config.offensive?this.selectVictimOffensively():this.config.protectHomeBase&&this.selectVictimDefensively()},t.prototype.selectVictimDefensively=function(){var t=this;this.state.victim=null;Date.now();var e=this.playerStats.filter(function(t){return t.isAgressive}).map(function(t){return t.id}),i=s.Spatie.getHostilePlayersSortedByDistance(null,e).filter(function(e){return t.isVictimValid(e)});0!==i.length&&(this.state.victim=i[0])},t.prototype.selectVictimOffensively=function(){var t=this.state.victim,e=this.getBestVictim();e=e||this.chooseNextVictim(),!this.isSamePlayer(t,e)&&(t&&s.Spatie.log("Dropped victim "+t.name),e&&(s.Spatie.log("Chose new victim "+e.name),this.state.lastTimeVictimWasChosen=Date.now(),this.state.pathToVictim=null),e&&this.state.hasLockOnTarget===e.id||(this.state.hasLockOnTarget=null)),this.state.previousVictimID=e?e.id:null,e||(this.config.bondingTimes=0),this.state.victim=e?Players.get(e.id):null},t.prototype.isSamePlayer=function(t,e){return!(t&&!e||!t&&e)&&(!t&&!e||t.id===e.id)},t.prototype.getBestVictim=function(){var t=this.targetFlagCarrier();if(t&&this.isVictimValid(t))return t;var e=this.takeOverSuggestion();if(e&&this.isVictimValid(e))return s.Spatie.log("Take over suggested"),e;var i=this.state.victim;if(i){if(!this.isVictimValid(i))return s.Spatie.log("Victim not active, or prowler, or spactating, or expired, or immune"),null;if(this.state.hasLockOnTarget===i.id)return i;var o=this.findVictimCloserByThan(i);return o||i}},t.prototype.getClosestValidPlayer=function(){for(var t=s.Spatie.getHostilePlayersSortedByDistance(),e=0;;){var i=t[e];if(!i)return null;if(this.isVictimValid(i))return i;e++}},t.prototype.findVictimCloserByThan=function(t){var e=this.getClosestValidPlayer();if(e.id!==t.id){var i=s.Spatie.getDeltaTo(t),o=s.Spatie.getDeltaTo(e),a=void 0;if(!o.isAccurate||i.distance<this.config.distanceClose?a=!1:o.isAccurate&&!i.isAccurate?(s.Spatie.log("switch: "+e.name+" is more accurate"),a=!0):o.distance/i.distance<.2&&(s.Spatie.log("switch: "+e.name+" is way closer"),a=!0),a)return e}return null},t.prototype.isVictimValid=function(t){var e,i=Date.now()-this.state.lastTimeVictimWasChosen,s=!!Players.get(t.id),o=t.removedFromMap,a=5===t.type,n=!!/^test.*/.exec(t.name)||this.config.bondingTimes>0&&!!/^.+Bot.*/.exec(t.name);return this.state.lastTimeVictimWasChosen&&(e=i>this.config.victimExpireMs),!(!s||a||o||e||n)},t.prototype.chooseNextVictim=function(){return s.Spatie.getHostilePlayersSortedByDistance(this.state.previousVictimID)[0]},t.prototype.targetFlagCarrier=function(){return this.state.flagCarrierID?Players.get(this.state.flagCarrierID):null},t.prototype.takeOverSuggestion=function(){if(!this.state.suggestedVictimID)return null;var t,e=Players.get(this.state.suggestedVictimID);if(!e)return null;0===s.Spatie.getRandomNumber(0,4)&&this.state.suggestingPlayerID!==game.myID?t=Players.get(this.state.suggestingPlayerID):t=e;return t&&s.Spatie.announce("ok, lock on target: "+t.name),this.state.suggestedVictimID=null,this.state.suggestingPlayerID=null,this.state.hasLockOnTarget=t.id,t},t}();e.SpatiebotVictimSelection=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t){this.hitMe=0,this.lastHit=0,this.id=t}return t.prototype.addHit=function(){this.lastHit=Date.now(),this.hitMe+=1},Object.defineProperty(t.prototype,"isAgressive",{get:function(){return!(Date.now()-this.lastHit>12e4)&&this.hitMe>2},enumerable:!0,configurable:!0}),t}();e.PlayerStat=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(2),o=function(){function t(){var t=this;this.worker=new Worker("data:text/javascript;base64,IWZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Z1bmN0aW9uIG4oaSl7aWYoZVtpXSlyZXR1cm4gZVtpXS5leHBvcnRzO3ZhciBvPWVbaV09e2k6aSxsOiExLGV4cG9ydHM6e319O3JldHVybiB0W2ldLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLG4pLG8ubD0hMCxvLmV4cG9ydHN9bi5tPXQsbi5jPWUsbi5kPWZ1bmN0aW9uKHQsZSxpKXtuLm8odCxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7ZW51bWVyYWJsZTohMCxnZXQ6aX0pfSxuLnI9ZnVuY3Rpb24odCl7InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0sbi50PWZ1bmN0aW9uKHQsZSl7aWYoMSZlJiYodD1uKHQpKSw4JmUpcmV0dXJuIHQ7aWYoNCZlJiYib2JqZWN0Ij09dHlwZW9mIHQmJnQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgaT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihpKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSwiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pLDImZSYmInN0cmluZyIhPXR5cGVvZiB0KWZvcih2YXIgbyBpbiB0KW4uZChpLG8sZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LmJpbmQobnVsbCxvKSk7cmV0dXJuIGl9LG4ubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdC5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gbi5kKGUsImEiLGUpLGV9LG4ubz1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sbi5wPSIiLG4obi5zPTE4KX0oW2Z1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtBbHdheXM6MSxOZXZlcjoyLElmQXRNb3N0T25lT2JzdGFjbGU6MyxPbmx5V2hlbk5vT2JzdGFjbGVzOjR9fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBlPVtbdC54LHQueV1dO3QucGFyZW50Oyl0PXQucGFyZW50LGUucHVzaChbdC54LHQueV0pO3JldHVybiBlLnJldmVyc2UoKX1mdW5jdGlvbiBpKHQsZSxuLGkpe3ZhciBvLHIscyxhLGwsaCx1PU1hdGguYWJzLHA9W107Zm9yKHM9dShuLXQpLGE9dShpLWUpLG89dDxuPzE6LTEscj1lPGk/MTotMSxsPXMtYTtwLnB1c2goW3QsZV0pLHQhPT1ufHxlIT09aTspKGg9MipsKT4tYSYmKGwtPWEsdCs9byksaDxzJiYobCs9cyxlKz1yKTtyZXR1cm4gcH1lLmJhY2t0cmFjZT1uLGUuYmlCYWNrdHJhY2U9ZnVuY3Rpb24odCxlKXt2YXIgaT1uKHQpLG89bihlKTtyZXR1cm4gaS5jb25jYXQoby5yZXZlcnNlKCkpfSxlLnBhdGhMZW5ndGg9ZnVuY3Rpb24odCl7dmFyIGUsbixpLG8scixzPTA7Zm9yKGU9MTtlPHQubGVuZ3RoOysrZSluPXRbZS0xXSxpPXRbZV0sbz1uWzBdLWlbMF0scj1uWzFdLWlbMV0scys9TWF0aC5zcXJ0KG8qbytyKnIpO3JldHVybiBzfSxlLmludGVycG9sYXRlPWksZS5leHBhbmRQYXRoPWZ1bmN0aW9uKHQpe3ZhciBlLG4sbyxyLHMsYSxsPVtdLGg9dC5sZW5ndGg7aWYoaDwyKXJldHVybiBsO2ZvcihzPTA7czxoLTE7KytzKWZvcihlPXRbc10sbj10W3MrMV0scj0obz1pKGVbMF0sZVsxXSxuWzBdLG5bMV0pKS5sZW5ndGgsYT0wO2E8ci0xOysrYSlsLnB1c2gob1thXSk7cmV0dXJuIGwucHVzaCh0W2gtMV0pLGx9LGUuc21vb3RoZW5QYXRoPWZ1bmN0aW9uKHQsZSl7dmFyIG4sbyxyLHMsYSxsLGgsdSxwLGY9ZS5sZW5ndGgsYz1lWzBdWzBdLGQ9ZVswXVsxXSxnPWVbZi0xXVswXSxiPWVbZi0xXVsxXTtmb3Iocj1bW249YyxvPWRdXSxzPTI7czxmOysrcyl7Zm9yKGg9aShuLG8sKGw9ZVtzXSlbMF0sbFsxXSkscD0hMSxhPTE7YTxoLmxlbmd0aDsrK2EpaWYodT1oW2FdLCF0LmlzV2Fsa2FibGVBdCh1WzBdLHVbMV0pKXtwPSEwO2JyZWFrfXAmJihsYXN0VmFsaWRDb29yZD1lW3MtMV0sci5wdXNoKGxhc3RWYWxpZENvb3JkKSxuPWxhc3RWYWxpZENvb3JkWzBdLG89bGFzdFZhbGlkQ29vcmRbMV0pfXJldHVybiByLnB1c2goW2csYl0pLHJ9LGUuY29tcHJlc3NQYXRoPWZ1bmN0aW9uKHQpe2lmKHQubGVuZ3RoPDMpcmV0dXJuIHQ7dmFyIGUsbixpLG8scixzLGE9W10sbD10WzBdWzBdLGg9dFswXVsxXSx1PXRbMV1bMF0scD10WzFdWzFdLGY9dS1sLGM9cC1oO2ZvcihmLz1yPU1hdGguc3FydChmKmYrYypjKSxjLz1yLGEucHVzaChbbCxoXSkscz0yO3M8dC5sZW5ndGg7cysrKWU9dSxuPXAsaT1mLG89YyxmPSh1PXRbc11bMF0pLWUsYz0ocD10W3NdWzFdKS1uLGMvPXI9TWF0aC5zcXJ0KGYqZitjKmMpLChmLz1yKT09PWkmJmM9PT1vfHxhLnB1c2goW2Usbl0pO3JldHVybiBhLnB1c2goW3UscF0pLGF9fSwsZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e21hbmhhdHRhbjpmdW5jdGlvbih0LGUpe3JldHVybiB0K2V9LGV1Y2xpZGVhbjpmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLnNxcnQodCp0K2UqZSl9LG9jdGlsZTpmdW5jdGlvbih0LGUpe3ZhciBuPU1hdGguU1FSVDItMTtyZXR1cm4gdDxlP24qdCtlOm4qZSt0fSxjaGVieXNoZXY6ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5tYXgodCxlKX19fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMjIpfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big0KSxvPW4oMSkscj1uKDMpO24oMCk7ZnVuY3Rpb24gcyh0KXt0PXR8fHt9LHRoaXMuaGV1cmlzdGljPXQuaGV1cmlzdGljfHxyLm1hbmhhdHRhbix0aGlzLnRyYWNrSnVtcFJlY3Vyc2lvbj10LnRyYWNrSnVtcFJlY3Vyc2lvbnx8ITF9cy5wcm90b3R5cGUuZmluZFBhdGg9ZnVuY3Rpb24odCxlLG4scixzKXt2YXIgYSxsPXRoaXMub3Blbkxpc3Q9bmV3IGkoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5mLWUuZn0pLGg9dGhpcy5zdGFydE5vZGU9cy5nZXROb2RlQXQodCxlKSx1PXRoaXMuZW5kTm9kZT1zLmdldE5vZGVBdChuLHIpO2Zvcih0aGlzLmdyaWQ9cyxoLmc9MCxoLmY9MCxsLnB1c2goaCksaC5vcGVuZWQ9ITA7IWwuZW1wdHkoKTspe2lmKChhPWwucG9wKCkpLmNsb3NlZD0hMCxhPT09dSlyZXR1cm4gby5leHBhbmRQYXRoKG8uYmFja3RyYWNlKHUpKTt0aGlzLl9pZGVudGlmeVN1Y2Nlc3NvcnMoYSl9cmV0dXJuW119LHMucHJvdG90eXBlLl9pZGVudGlmeVN1Y2Nlc3NvcnM9ZnVuY3Rpb24odCl7dmFyIGUsbixpLG8scyxhLGwsaCx1LHAsZj10aGlzLmdyaWQsYz10aGlzLmhldXJpc3RpYyxkPXRoaXMub3Blbkxpc3QsZz10aGlzLmVuZE5vZGUueCxiPXRoaXMuZW5kTm9kZS55LHk9dC54LHY9dC55LEE9TWF0aC5hYnM7TWF0aC5tYXg7Zm9yKG89MCxzPShlPXRoaXMuX2ZpbmROZWlnaGJvcnModCkpLmxlbmd0aDtvPHM7KytvKWlmKG49ZVtvXSxpPXRoaXMuX2p1bXAoblswXSxuWzFdLHksdikpe2lmKGE9aVswXSxsPWlbMV0sKHA9Zi5nZXROb2RlQXQoYSxsKSkuY2xvc2VkKWNvbnRpbnVlO2g9ci5vY3RpbGUoQShhLXkpLEEobC12KSksdT10LmcraCwoIXAub3BlbmVkfHx1PHAuZykmJihwLmc9dSxwLmg9cC5ofHxjKEEoYS1nKSxBKGwtYikpLHAuZj1wLmcrcC5oLHAucGFyZW50PXQscC5vcGVuZWQ/ZC51cGRhdGVJdGVtKHApOihkLnB1c2gocCkscC5vcGVuZWQ9ITApKX19LHQuZXhwb3J0cz1zfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dGhpcy54PXQsdGhpcy55PWUsdGhpcy53YWxrYWJsZT12b2lkIDA9PT1ufHxufX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNCksbz1uKDEpLHI9bigzKSxzPW4oMCk7ZnVuY3Rpb24gYSh0KXt0PXR8fHt9LHRoaXMuYWxsb3dEaWFnb25hbD10LmFsbG93RGlhZ29uYWwsdGhpcy5kb250Q3Jvc3NDb3JuZXJzPXQuZG9udENyb3NzQ29ybmVycyx0aGlzLmhldXJpc3RpYz10LmhldXJpc3RpY3x8ci5tYW5oYXR0YW4sdGhpcy53ZWlnaHQ9dC53ZWlnaHR8fDEsdGhpcy5kaWFnb25hbE1vdmVtZW50PXQuZGlhZ29uYWxNb3ZlbWVudCx0aGlzLmRpYWdvbmFsTW92ZW1lbnR8fCh0aGlzLmFsbG93RGlhZ29uYWw/dGhpcy5kb250Q3Jvc3NDb3JuZXJzP3RoaXMuZGlhZ29uYWxNb3ZlbWVudD1zLk9ubHlXaGVuTm9PYnN0YWNsZXM6dGhpcy5kaWFnb25hbE1vdmVtZW50PXMuSWZBdE1vc3RPbmVPYnN0YWNsZTp0aGlzLmRpYWdvbmFsTW92ZW1lbnQ9cy5OZXZlciksdGhpcy5kaWFnb25hbE1vdmVtZW50PT09cy5OZXZlcj90aGlzLmhldXJpc3RpYz10LmhldXJpc3RpY3x8ci5tYW5oYXR0YW46dGhpcy5oZXVyaXN0aWM9dC5oZXVyaXN0aWN8fHIub2N0aWxlfWEucHJvdG90eXBlLmZpbmRQYXRoPWZ1bmN0aW9uKHQsZSxuLHIscyl7dmFyIGEsbCxoLHUscCxmLGMsZCxnPW5ldyBpKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZi1lLmZ9KSxiPXMuZ2V0Tm9kZUF0KHQsZSkseT1zLmdldE5vZGVBdChuLHIpLHY9dGhpcy5oZXVyaXN0aWMsQT10aGlzLmRpYWdvbmFsTW92ZW1lbnQsbT10aGlzLndlaWdodCxrPU1hdGguYWJzLFc9TWF0aC5TUVJUMjtmb3IoYi5nPTAsYi5mPTAsZy5wdXNoKGIpLGIub3BlbmVkPSEwOyFnLmVtcHR5KCk7KXtpZigoYT1nLnBvcCgpKS5jbG9zZWQ9ITAsYT09PXkpcmV0dXJuIG8uYmFja3RyYWNlKHkpO2Zvcih1PTAscD0obD1zLmdldE5laWdoYm9ycyhhLEEpKS5sZW5ndGg7dTxwOysrdSkoaD1sW3VdKS5jbG9zZWR8fChmPWgueCxjPWgueSxkPWEuZysoZi1hLng9PTB8fGMtYS55PT0wPzE6VyksKCFoLm9wZW5lZHx8ZDxoLmcpJiYoaC5nPWQsaC5oPWguaHx8bSp2KGsoZi1uKSxrKGMtcikpLGguZj1oLmcraC5oLGgucGFyZW50PWEsaC5vcGVuZWQ/Zy51cGRhdGVJdGVtKGgpOihnLnB1c2goaCksaC5vcGVuZWQ9ITApKSl9cmV0dXJuW119LHQuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big0KSxvPW4oMSkscj1uKDMpLHM9bigwKTtmdW5jdGlvbiBhKHQpe3Q9dHx8e30sdGhpcy5hbGxvd0RpYWdvbmFsPXQuYWxsb3dEaWFnb25hbCx0aGlzLmRvbnRDcm9zc0Nvcm5lcnM9dC5kb250Q3Jvc3NDb3JuZXJzLHRoaXMuZGlhZ29uYWxNb3ZlbWVudD10LmRpYWdvbmFsTW92ZW1lbnQsdGhpcy5oZXVyaXN0aWM9dC5oZXVyaXN0aWN8fHIubWFuaGF0dGFuLHRoaXMud2VpZ2h0PXQud2VpZ2h0fHwxLHRoaXMuZGlhZ29uYWxNb3ZlbWVudHx8KHRoaXMuYWxsb3dEaWFnb25hbD90aGlzLmRvbnRDcm9zc0Nvcm5lcnM/dGhpcy5kaWFnb25hbE1vdmVtZW50PXMuT25seVdoZW5Ob09ic3RhY2xlczp0aGlzLmRpYWdvbmFsTW92ZW1lbnQ9cy5JZkF0TW9zdE9uZU9ic3RhY2xlOnRoaXMuZGlhZ29uYWxNb3ZlbWVudD1zLk5ldmVyKSx0aGlzLmRpYWdvbmFsTW92ZW1lbnQ9PT1zLk5ldmVyP3RoaXMuaGV1cmlzdGljPXQuaGV1cmlzdGljfHxyLm1hbmhhdHRhbjp0aGlzLmhldXJpc3RpYz10LmhldXJpc3RpY3x8ci5vY3RpbGV9YS5wcm90b3R5cGUuZmluZFBhdGg9ZnVuY3Rpb24odCxlLG4scixzKXt2YXIgYSxsLGgsdSxwLGYsYyxkLGc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5mLWUuZn0sYj1uZXcgaShnKSx5PW5ldyBpKGcpLHY9cy5nZXROb2RlQXQodCxlKSxBPXMuZ2V0Tm9kZUF0KG4sciksbT10aGlzLmhldXJpc3RpYyxrPXRoaXMuZGlhZ29uYWxNb3ZlbWVudCxXPXRoaXMud2VpZ2h0LE09TWF0aC5hYnMseD1NYXRoLlNRUlQyO2Zvcih2Lmc9MCx2LmY9MCxiLnB1c2godiksdi5vcGVuZWQ9MSxBLmc9MCxBLmY9MCx5LnB1c2goQSksQS5vcGVuZWQ9MjshYi5lbXB0eSgpJiYheS5lbXB0eSgpOyl7Zm9yKChhPWIucG9wKCkpLmNsb3NlZD0hMCx1PTAscD0obD1zLmdldE5laWdoYm9ycyhhLGspKS5sZW5ndGg7dTxwOysrdSlpZighKGg9bFt1XSkuY2xvc2VkKXtpZigyPT09aC5vcGVuZWQpcmV0dXJuIG8uYmlCYWNrdHJhY2UoYSxoKTtmPWgueCxjPWgueSxkPWEuZysoZi1hLng9PTB8fGMtYS55PT0wPzE6eCksKCFoLm9wZW5lZHx8ZDxoLmcpJiYoaC5nPWQsaC5oPWguaHx8VyptKE0oZi1uKSxNKGMtcikpLGguZj1oLmcraC5oLGgucGFyZW50PWEsaC5vcGVuZWQ/Yi51cGRhdGVJdGVtKGgpOihiLnB1c2goaCksaC5vcGVuZWQ9MSkpfWZvcigoYT15LnBvcCgpKS5jbG9zZWQ9ITAsdT0wLHA9KGw9cy5nZXROZWlnaGJvcnMoYSxrKSkubGVuZ3RoO3U8cDsrK3UpaWYoIShoPWxbdV0pLmNsb3NlZCl7aWYoMT09PWgub3BlbmVkKXJldHVybiBvLmJpQmFja3RyYWNlKGgsYSk7Zj1oLngsYz1oLnksZD1hLmcrKGYtYS54PT0wfHxjLWEueT09MD8xOngpLCghaC5vcGVuZWR8fGQ8aC5nKSYmKGguZz1kLGguaD1oLmh8fFcqbShNKGYtdCksTShjLWUpKSxoLmY9aC5nK2guaCxoLnBhcmVudD1hLGgub3BlbmVkP3kudXBkYXRlSXRlbShoKTooeS5wdXNoKGgpLGgub3BlbmVkPTIpKX19cmV0dXJuW119LHQuZXhwb3J0cz1hfSwsLCwsLCwsLCxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uZXcobigxOSkuQm90TmF2aWdhdGlvbik7b25tZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YSxuPWVbMF0sbz1zZWxmLnBvc3RNZXNzYWdlO3RyeXtpZigiZmluZFBhdGgiPT09bil7dmFyIHI9ZVsxXSxzPWVbMl0sYT1lWzNdO28oWyJmaW5kUGF0aCIsaS5maW5kUGF0aChyLHMpLGFdKX1lbHNlIGlmKCJzZXRNb3VudGFpbnMiPT09bil7dmFyIGw9ZVsxXTtpLnNldE1vdW50YWlucyhsKSxvKFsiUkVBRFkiXSl9ZWxzZSBvKFsiRVJST1IiLCJ1bmtub3duIGFjdGlvbiAiK25dKX1jYXRjaCh0KXtvKFsiTE9HIiwiZXJyb3IhIix0Lm1lc3NhZ2VdKSxvKFsiRVJST1IiXSl9fX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9bigyMCksbz17bGVmdDotMTYzNTIsdG9wOi04MTYwLHJpZ2h0OjE2MzUyLGJvdHRvbTo4MTYwfSxyPTE3NSxzPTI1MDAsYT01MDAsbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLnNldE1vdW50YWlucz1mdW5jdGlvbih0KXt0aGlzLm1vdW50YWlucz10fSx0LnByb3RvdHlwZS5nZXRHcmlkPWZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBzPW5ldyBpLkdyaWQoTWF0aC5jZWlsKHQpLE1hdGguY2VpbChlKSk7cmV0dXJuIHRoaXMubW91bnRhaW5zLmZvckVhY2goZnVuY3Rpb24oaSl7dmFyIGE9cippLnNjYWxlO2lmKCEoaS54PG4tYXx8aS54Pm4rdCthfHxpLnk8by1hfHxpLnk+bytlK2EpKWZvcih2YXIgbD1pLngtYSxoPWkueCthLHU9aS55LWEscD1pLnkrYSxmPWw7Zjw9aDtmKyspZm9yKHZhciBjPXU7Yzw9cDtjKyspe3ZhciBkPU1hdGguZmxvb3IoZi1uKSxnPU1hdGguZmxvb3IoYy1vKTtkPDB8fGQ+PXR8fGc8MHx8Zz49ZXx8cy5zZXRXYWxrYWJsZUF0KGQsZywhMSl9fSksc30sdC5wcm90b3R5cGUuaXNWYWxpZD1mdW5jdGlvbih0KXtyZXR1cm4gdC54Pm8ubGVmdCszMiYmdC54PG8ucmlnaHQtMzImJnQueT5vLnRvcCszMiYmdC55PG8uYm90dG9tLTMyfSx0LnByb3RvdHlwZS5maW5kUGF0aD1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09biYmKG49MCksIXRoaXMuaXNWYWxpZCh0KXx8IXRoaXMuaXNWYWxpZChlKSlyZXR1cm5bXTt2YXIgbyxyLGw9bi8yLGg9TWF0aC5taW4ocyxNYXRoLmFicyhlLngtdC54KStuKTtvPWUueD50Lng/dC54LWw6dC54LWgrMStsO3ZhciB1PU1hdGgubWluKHMsTWF0aC5hYnMoZS55LXQueSkrbik7cj1lLnk+dC55P3QueS1sOnQueS11KzErbDt2YXIgcD10aGlzLmdldEdyaWQoaCx1LG8sciksZj1uZXcoMCxpLkJlc3RGaXJzdEZpbmRlcikoe2FsbG93RGlhZ29uYWw6ITB9KSxjPU1hdGguZmxvb3IodC54LW8pLGQ9TWF0aC5mbG9vcih0LnktciksZz1lLngtbyxiPWUueS1yO2c8MCYmKGc9MCksZz49aCYmKGc9aC0xKTt2YXIgeT0xO2ZvcihiPDAmJihiPTApLGI+PXUmJihiPXUtMSx5PS0xKSxnPU1hdGguZmxvb3IoZyksYj1NYXRoLmZsb29yKGIpOyFwLmlzV2Fsa2FibGVBdChnLGIpJiZiPjAmJmI8dS0xOyliKz15O2Zvcig7IXAuaXNXYWxrYWJsZUF0KGMsZCkmJmQ+MCYmZDx1LTE7KWQrPXk7dmFyIHY9Zi5maW5kUGF0aChjLGQsZyxiLHApO2lmKHYubGVuZ3RoPjApe3Y9aS5VdGlsLnNtb290aGVuUGF0aChwLHYpO2Zvcih2YXIgQT1bXSxtPTA7bTx2Lmxlbmd0aDttKyspe3ZhciBrPXZbbV1bMF0rbyxXPXZbbV1bMV0rcjtBLnB1c2goe3g6ayx5Old9KX1yZXR1cm4gQX1yZXR1cm4gbj49cz9bXTp0aGlzLmZpbmRQYXRoKHQsZSxuK2EpfSx0fSgpO2UuQm90TmF2aWdhdGlvbj1sfSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMjEpfSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtIZWFwOm4oNCksTm9kZTpuKDYpLEdyaWQ6bigyNCksVXRpbDpuKDEpLERpYWdvbmFsTW92ZW1lbnQ6bigwKSxIZXVyaXN0aWM6bigzKSxBU3RhckZpbmRlcjpuKDcpLEJlc3RGaXJzdEZpbmRlcjpuKDI1KSxCcmVhZHRoRmlyc3RGaW5kZXI6bigyNiksRGlqa3N0cmFGaW5kZXI6bigyNyksQmlBU3RhckZpbmRlcjpuKDgpLEJpQmVzdEZpcnN0RmluZGVyOm4oMjgpLEJpQnJlYWR0aEZpcnN0RmluZGVyOm4oMjkpLEJpRGlqa3N0cmFGaW5kZXI6bigzMCksSURBU3RhckZpbmRlcjpuKDMxKSxKdW1wUG9pbnRGaW5kZXI6bigzMil9fSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKHQpeyhmdW5jdGlvbigpe3ZhciBlLG4saSxvLHIscyxhLGwsaCx1LHAsZixjLGQsZztpPU1hdGguZmxvb3IsdT1NYXRoLm1pbixuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ8ZT8tMTp0PmU/MTowfSxoPWZ1bmN0aW9uKHQsZSxvLHIscyl7dmFyIGE7aWYobnVsbD09byYmKG89MCksbnVsbD09cyYmKHM9biksbzwwKXRocm93IG5ldyBFcnJvcigibG8gbXVzdCBiZSBub24tbmVnYXRpdmUiKTtmb3IobnVsbD09ciYmKHI9dC5sZW5ndGgpO288cjspcyhlLHRbYT1pKChvK3IpLzIpXSk8MD9yPWE6bz1hKzE7cmV0dXJuW10uc3BsaWNlLmFwcGx5KHQsW28sby1vXS5jb25jYXQoZSkpLGV9LHM9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBudWxsPT1pJiYoaT1uKSx0LnB1c2goZSksZCh0LDAsdC5sZW5ndGgtMSxpKX0scj1mdW5jdGlvbih0LGUpe3ZhciBpLG87cmV0dXJuIG51bGw9PWUmJihlPW4pLGk9dC5wb3AoKSx0Lmxlbmd0aD8obz10WzBdLHRbMF09aSxnKHQsMCxlKSk6bz1pLG99LGw9ZnVuY3Rpb24odCxlLGkpe3ZhciBvO3JldHVybiBudWxsPT1pJiYoaT1uKSxvPXRbMF0sdFswXT1lLGcodCwwLGkpLG99LGE9ZnVuY3Rpb24odCxlLGkpe3ZhciBvO3JldHVybiBudWxsPT1pJiYoaT1uKSx0Lmxlbmd0aCYmaSh0WzBdLGUpPDAmJihlPShvPVt0WzBdLGVdKVswXSx0WzBdPW9bMV0sZyh0LDAsaSkpLGV9LG89ZnVuY3Rpb24odCxlKXt2YXIgbyxyLHMsYSxsLGg7Zm9yKG51bGw9PWUmJihlPW4pLGw9W10scj0wLHM9KGE9ZnVuY3Rpb24oKXtoPVtdO2Zvcih2YXIgZT0wLG49aSh0Lmxlbmd0aC8yKTswPD1uP2U8bjplPm47MDw9bj9lKys6ZS0tKWgucHVzaChlKTtyZXR1cm4gaH0uYXBwbHkodGhpcykucmV2ZXJzZSgpKS5sZW5ndGg7cjxzO3IrKylvPWFbcl0sbC5wdXNoKGcodCxvLGUpKTtyZXR1cm4gbH0sYz1mdW5jdGlvbih0LGUsaSl7dmFyIG87aWYobnVsbD09aSYmKGk9biksLTEhPT0obz10LmluZGV4T2YoZSkpKXJldHVybiBkKHQsMCxvLGkpLGcodCxvLGkpfSxwPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcixzLGwsaCx1O2lmKG51bGw9PWkmJihpPW4pLCEocz10LnNsaWNlKDAsZSkpLmxlbmd0aClyZXR1cm4gcztmb3IobyhzLGkpLGw9MCxoPSh1PXQuc2xpY2UoZSkpLmxlbmd0aDtsPGg7bCsrKXI9dVtsXSxhKHMscixpKTtyZXR1cm4gcy5zb3J0KGkpLnJldmVyc2UoKX0sZj1mdW5jdGlvbih0LGUsaSl7dmFyIHMsYSxsLHAsZixjLGQsZyxiO2lmKG51bGw9PWkmJihpPW4pLDEwKmU8PXQubGVuZ3RoKXtpZighKGw9dC5zbGljZSgwLGUpLnNvcnQoaSkpLmxlbmd0aClyZXR1cm4gbDtmb3IoYT1sW2wubGVuZ3RoLTFdLHA9MCxjPShkPXQuc2xpY2UoZSkpLmxlbmd0aDtwPGM7cCsrKWkocz1kW3BdLGEpPDAmJihoKGwscywwLG51bGwsaSksbC5wb3AoKSxhPWxbbC5sZW5ndGgtMV0pO3JldHVybiBsfWZvcihvKHQsaSksYj1bXSxmPTAsZz11KGUsdC5sZW5ndGgpOzA8PWc/ZjxnOmY+ZzswPD1nPysrZjotLWYpYi5wdXNoKHIodCxpKSk7cmV0dXJuIGJ9LGQ9ZnVuY3Rpb24odCxlLGksbyl7dmFyIHIscyxhO2ZvcihudWxsPT1vJiYobz1uKSxyPXRbaV07aT5lJiZvKHIscz10W2E9aS0xPj4xXSk8MDspdFtpXT1zLGk9YTtyZXR1cm4gdFtpXT1yfSxnPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbyxyLHMsYSxsO2ZvcihudWxsPT1pJiYoaT1uKSxyPXQubGVuZ3RoLGw9ZSxzPXRbZV0sbz0yKmUrMTtvPHI7KShhPW8rMSk8ciYmIShpKHRbb10sdFthXSk8MCkmJihvPWEpLHRbZV09dFtvXSxvPTIqKGU9bykrMTtyZXR1cm4gdFtlXT1zLGQodCxsLGUsaSl9LGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuY21wPW51bGwhPXQ/dDpuLHRoaXMubm9kZXM9W119cmV0dXJuIHQucHVzaD1zLHQucG9wPXIsdC5yZXBsYWNlPWwsdC5wdXNocG9wPWEsdC5oZWFwaWZ5PW8sdC51cGRhdGVJdGVtPWMsdC5ubGFyZ2VzdD1wLHQubnNtYWxsZXN0PWYsdC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0KXtyZXR1cm4gcyh0aGlzLm5vZGVzLHQsdGhpcy5jbXApfSx0LnByb3RvdHlwZS5wb3A9ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzLm5vZGVzLHRoaXMuY21wKX0sdC5wcm90b3R5cGUucGVlaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzWzBdfSx0LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbih0KXtyZXR1cm4tMSE9PXRoaXMubm9kZXMuaW5kZXhPZih0KX0sdC5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0KXtyZXR1cm4gbCh0aGlzLm5vZGVzLHQsdGhpcy5jbXApfSx0LnByb3RvdHlwZS5wdXNocG9wPWZ1bmN0aW9uKHQpe3JldHVybiBhKHRoaXMubm9kZXMsdCx0aGlzLmNtcCl9LHQucHJvdG90eXBlLmhlYXBpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLm5vZGVzLHRoaXMuY21wKX0sdC5wcm90b3R5cGUudXBkYXRlSXRlbT1mdW5jdGlvbih0KXtyZXR1cm4gYyh0aGlzLm5vZGVzLHQsdGhpcy5jbXApfSx0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzPVtdfSx0LnByb3RvdHlwZS5lbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5ub2Rlcy5sZW5ndGh9LHQucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlcy5sZW5ndGh9LHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuKGU9bmV3IHQpLm5vZGVzPXRoaXMubm9kZXMuc2xpY2UoMCksZX0sdC5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzLnNsaWNlKDApfSx0LnByb3RvdHlwZS5pbnNlcnQ9dC5wcm90b3R5cGUucHVzaCx0LnByb3RvdHlwZS50b3A9dC5wcm90b3R5cGUucGVlayx0LnByb3RvdHlwZS5mcm9udD10LnByb3RvdHlwZS5wZWVrLHQucHJvdG90eXBlLmhhcz10LnByb3RvdHlwZS5jb250YWlucyx0LnByb3RvdHlwZS5jb3B5PXQucHJvdG90eXBlLmNsb25lLHR9KCksKHZvaWQgMCE9PXQmJm51bGwhPT10P3QuZXhwb3J0czp2b2lkIDApP3QuZXhwb3J0cz1lOndpbmRvdy5IZWFwPWV9KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLG4oMjMpKHQpKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQud2VicGFja1BvbHlmaWxsfHwodC5kZXByZWNhdGU9ZnVuY3Rpb24oKXt9LHQucGF0aHM9W10sdC5jaGlsZHJlbnx8KHQuY2hpbGRyZW49W10pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJsb2FkZWQiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0Lmx9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsImlkIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5pfX0pLHQud2VicGFja1BvbHlmaWxsPTEpLHR9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big2KSxvPW4oMCk7ZnVuY3Rpb24gcih0LGUsbil7dmFyIGk7Im9iamVjdCIhPXR5cGVvZiB0P2k9dDooZT10Lmxlbmd0aCxpPXRbMF0ubGVuZ3RoLG49dCksdGhpcy53aWR0aD1pLHRoaXMuaGVpZ2h0PWUsdGhpcy5ub2Rlcz10aGlzLl9idWlsZE5vZGVzKGksZSxuKX1yLnByb3RvdHlwZS5fYnVpbGROb2Rlcz1mdW5jdGlvbih0LGUsbil7dmFyIG8scixzPW5ldyBBcnJheShlKTtmb3Iobz0wO288ZTsrK28pZm9yKHNbb109bmV3IEFycmF5KHQpLHI9MDtyPHQ7KytyKXNbb11bcl09bmV3IGkocixvKTtpZih2b2lkIDA9PT1uKXJldHVybiBzO2lmKG4ubGVuZ3RoIT09ZXx8blswXS5sZW5ndGghPT10KXRocm93IG5ldyBFcnJvcigiTWF0cml4IHNpemUgZG9lcyBub3QgZml0Iik7Zm9yKG89MDtvPGU7KytvKWZvcihyPTA7cjx0OysrciluW29dW3JdJiYoc1tvXVtyXS53YWxrYWJsZT0hMSk7cmV0dXJuIHN9LHIucHJvdG90eXBlLmdldE5vZGVBdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLm5vZGVzW2VdW3RdfSxyLnByb3RvdHlwZS5pc1dhbGthYmxlQXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5pc0luc2lkZSh0LGUpJiZ0aGlzLm5vZGVzW2VdW3RdLndhbGthYmxlfSxyLnByb3RvdHlwZS5pc0luc2lkZT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj0wJiZ0PHRoaXMud2lkdGgmJmU+PTAmJmU8dGhpcy5oZWlnaHR9LHIucHJvdG90eXBlLnNldFdhbGthYmxlQXQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMubm9kZXNbZV1bdF0ud2Fsa2FibGU9bn0sci5wcm90b3R5cGUuZ2V0TmVpZ2hib3JzPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC54LGk9dC55LHI9W10scz0hMSxhPSExLGw9ITEsaD0hMSx1PSExLHA9ITEsZj0hMSxjPSExLGQ9dGhpcy5ub2RlcztpZih0aGlzLmlzV2Fsa2FibGVBdChuLGktMSkmJihyLnB1c2goZFtpLTFdW25dKSxzPSEwKSx0aGlzLmlzV2Fsa2FibGVBdChuKzEsaSkmJihyLnB1c2goZFtpXVtuKzFdKSxsPSEwKSx0aGlzLmlzV2Fsa2FibGVBdChuLGkrMSkmJihyLnB1c2goZFtpKzFdW25dKSx1PSEwKSx0aGlzLmlzV2Fsa2FibGVBdChuLTEsaSkmJihyLnB1c2goZFtpXVtuLTFdKSxmPSEwKSxlPT09by5OZXZlcilyZXR1cm4gcjtpZihlPT09by5Pbmx5V2hlbk5vT2JzdGFjbGVzKWE9ZiYmcyxoPXMmJmwscD1sJiZ1LGM9dSYmZjtlbHNlIGlmKGU9PT1vLklmQXRNb3N0T25lT2JzdGFjbGUpYT1mfHxzLGg9c3x8bCxwPWx8fHUsYz11fHxmO2Vsc2V7aWYoZSE9PW8uQWx3YXlzKXRocm93IG5ldyBFcnJvcigiSW5jb3JyZWN0IHZhbHVlIG9mIGRpYWdvbmFsTW92ZW1lbnQiKTthPSEwLGg9ITAscD0hMCxjPSEwfXJldHVybiBhJiZ0aGlzLmlzV2Fsa2FibGVBdChuLTEsaS0xKSYmci5wdXNoKGRbaS0xXVtuLTFdKSxoJiZ0aGlzLmlzV2Fsa2FibGVBdChuKzEsaS0xKSYmci5wdXNoKGRbaS0xXVtuKzFdKSxwJiZ0aGlzLmlzV2Fsa2FibGVBdChuKzEsaSsxKSYmci5wdXNoKGRbaSsxXVtuKzFdKSxjJiZ0aGlzLmlzV2Fsa2FibGVBdChuLTEsaSsxKSYmci5wdXNoKGRbaSsxXVtuLTFdKSxyfSxyLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciB0LGUsbj10aGlzLndpZHRoLG89dGhpcy5oZWlnaHQscz10aGlzLm5vZGVzLGE9bmV3IHIobixvKSxsPW5ldyBBcnJheShvKTtmb3IodD0wO3Q8bzsrK3QpZm9yKGxbdF09bmV3IEFycmF5KG4pLGU9MDtlPG47KytlKWxbdF1bZV09bmV3IGkoZSx0LHNbdF1bZV0ud2Fsa2FibGUpO3JldHVybiBhLm5vZGVzPWwsYX0sdC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDcpO2Z1bmN0aW9uIG8odCl7aS5jYWxsKHRoaXMsdCk7dmFyIGU9dGhpcy5oZXVyaXN0aWM7dGhpcy5oZXVyaXN0aWM9ZnVuY3Rpb24odCxuKXtyZXR1cm4gMWU2KmUodCxuKX19by5wcm90b3R5cGU9bmV3IGksby5wcm90b3R5cGUuY29uc3RydWN0b3I9byx0LmV4cG9ydHM9b30sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMSksbz1uKDApO2Z1bmN0aW9uIHIodCl7dD10fHx7fSx0aGlzLmFsbG93RGlhZ29uYWw9dC5hbGxvd0RpYWdvbmFsLHRoaXMuZG9udENyb3NzQ29ybmVycz10LmRvbnRDcm9zc0Nvcm5lcnMsdGhpcy5kaWFnb25hbE1vdmVtZW50PXQuZGlhZ29uYWxNb3ZlbWVudCx0aGlzLmRpYWdvbmFsTW92ZW1lbnR8fCh0aGlzLmFsbG93RGlhZ29uYWw/dGhpcy5kb250Q3Jvc3NDb3JuZXJzP3RoaXMuZGlhZ29uYWxNb3ZlbWVudD1vLk9ubHlXaGVuTm9PYnN0YWNsZXM6dGhpcy5kaWFnb25hbE1vdmVtZW50PW8uSWZBdE1vc3RPbmVPYnN0YWNsZTp0aGlzLmRpYWdvbmFsTW92ZW1lbnQ9by5OZXZlcil9ci5wcm90b3R5cGUuZmluZFBhdGg9ZnVuY3Rpb24odCxlLG4sbyxyKXt2YXIgcyxhLGwsaCx1LHA9W10sZj10aGlzLmRpYWdvbmFsTW92ZW1lbnQsYz1yLmdldE5vZGVBdCh0LGUpLGQ9ci5nZXROb2RlQXQobixvKTtmb3IocC5wdXNoKGMpLGMub3BlbmVkPSEwO3AubGVuZ3RoOyl7aWYoKGw9cC5zaGlmdCgpKS5jbG9zZWQ9ITAsbD09PWQpcmV0dXJuIGkuYmFja3RyYWNlKGQpO2ZvcihoPTAsdT0ocz1yLmdldE5laWdoYm9ycyhsLGYpKS5sZW5ndGg7aDx1OysraCkoYT1zW2hdKS5jbG9zZWR8fGEub3BlbmVkfHwocC5wdXNoKGEpLGEub3BlbmVkPSEwLGEucGFyZW50PWwpfXJldHVybltdfSx0LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNyk7ZnVuY3Rpb24gbyh0KXtpLmNhbGwodGhpcyx0KSx0aGlzLmhldXJpc3RpYz1mdW5jdGlvbih0LGUpe3JldHVybiAwfX1vLnByb3RvdHlwZT1uZXcgaSxvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1vLHQuZXhwb3J0cz1vfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtmdW5jdGlvbiBvKHQpe2kuY2FsbCh0aGlzLHQpO3ZhciBlPXRoaXMuaGV1cmlzdGljO3RoaXMuaGV1cmlzdGljPWZ1bmN0aW9uKHQsbil7cmV0dXJuIDFlNiplKHQsbil9fW8ucHJvdG90eXBlPW5ldyBpLG8ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW8sdC5leHBvcnRzPW99LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDEpLG89bigwKTtmdW5jdGlvbiByKHQpe3Q9dHx8e30sdGhpcy5hbGxvd0RpYWdvbmFsPXQuYWxsb3dEaWFnb25hbCx0aGlzLmRvbnRDcm9zc0Nvcm5lcnM9dC5kb250Q3Jvc3NDb3JuZXJzLHRoaXMuZGlhZ29uYWxNb3ZlbWVudD10LmRpYWdvbmFsTW92ZW1lbnQsdGhpcy5kaWFnb25hbE1vdmVtZW50fHwodGhpcy5hbGxvd0RpYWdvbmFsP3RoaXMuZG9udENyb3NzQ29ybmVycz90aGlzLmRpYWdvbmFsTW92ZW1lbnQ9by5Pbmx5V2hlbk5vT2JzdGFjbGVzOnRoaXMuZGlhZ29uYWxNb3ZlbWVudD1vLklmQXRNb3N0T25lT2JzdGFjbGU6dGhpcy5kaWFnb25hbE1vdmVtZW50PW8uTmV2ZXIpfXIucHJvdG90eXBlLmZpbmRQYXRoPWZ1bmN0aW9uKHQsZSxuLG8scil7dmFyIHMsYSxsLGgsdSxwPXIuZ2V0Tm9kZUF0KHQsZSksZj1yLmdldE5vZGVBdChuLG8pLGM9W10sZD1bXSxnPXRoaXMuZGlhZ29uYWxNb3ZlbWVudDtmb3IoYy5wdXNoKHApLHAub3BlbmVkPSEwLHAuYnk9MCxkLnB1c2goZiksZi5vcGVuZWQ9ITAsZi5ieT0xO2MubGVuZ3RoJiZkLmxlbmd0aDspe2ZvcigobD1jLnNoaWZ0KCkpLmNsb3NlZD0hMCxoPTAsdT0ocz1yLmdldE5laWdoYm9ycyhsLGcpKS5sZW5ndGg7aDx1OysraClpZighKGE9c1toXSkuY2xvc2VkKWlmKGEub3BlbmVkKXtpZigxPT09YS5ieSlyZXR1cm4gaS5iaUJhY2t0cmFjZShsLGEpfWVsc2UgYy5wdXNoKGEpLGEucGFyZW50PWwsYS5vcGVuZWQ9ITAsYS5ieT0wO2ZvcigobD1kLnNoaWZ0KCkpLmNsb3NlZD0hMCxoPTAsdT0ocz1yLmdldE5laWdoYm9ycyhsLGcpKS5sZW5ndGg7aDx1OysraClpZighKGE9c1toXSkuY2xvc2VkKWlmKGEub3BlbmVkKXtpZigwPT09YS5ieSlyZXR1cm4gaS5iaUJhY2t0cmFjZShhLGwpfWVsc2UgZC5wdXNoKGEpLGEucGFyZW50PWwsYS5vcGVuZWQ9ITAsYS5ieT0xfXJldHVybltdfSx0LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCk7ZnVuY3Rpb24gbyh0KXtpLmNhbGwodGhpcyx0KSx0aGlzLmhldXJpc3RpYz1mdW5jdGlvbih0LGUpe3JldHVybiAwfX1vLnByb3RvdHlwZT1uZXcgaSxvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1vLHQuZXhwb3J0cz1vfSxmdW5jdGlvbih0LGUsbil7bigxKTt2YXIgaT1uKDMpLG89big2KSxyPW4oMCk7ZnVuY3Rpb24gcyh0KXt0PXR8fHt9LHRoaXMuYWxsb3dEaWFnb25hbD10LmFsbG93RGlhZ29uYWwsdGhpcy5kb250Q3Jvc3NDb3JuZXJzPXQuZG9udENyb3NzQ29ybmVycyx0aGlzLmRpYWdvbmFsTW92ZW1lbnQ9dC5kaWFnb25hbE1vdmVtZW50LHRoaXMuaGV1cmlzdGljPXQuaGV1cmlzdGljfHxpLm1hbmhhdHRhbix0aGlzLndlaWdodD10LndlaWdodHx8MSx0aGlzLnRyYWNrUmVjdXJzaW9uPXQudHJhY2tSZWN1cnNpb258fCExLHRoaXMudGltZUxpbWl0PXQudGltZUxpbWl0fHwxLzAsdGhpcy5kaWFnb25hbE1vdmVtZW50fHwodGhpcy5hbGxvd0RpYWdvbmFsP3RoaXMuZG9udENyb3NzQ29ybmVycz90aGlzLmRpYWdvbmFsTW92ZW1lbnQ9ci5Pbmx5V2hlbk5vT2JzdGFjbGVzOnRoaXMuZGlhZ29uYWxNb3ZlbWVudD1yLklmQXRNb3N0T25lT2JzdGFjbGU6dGhpcy5kaWFnb25hbE1vdmVtZW50PXIuTmV2ZXIpLHRoaXMuZGlhZ29uYWxNb3ZlbWVudD09PXIuTmV2ZXI/dGhpcy5oZXVyaXN0aWM9dC5oZXVyaXN0aWN8fGkubWFuaGF0dGFuOnRoaXMuaGV1cmlzdGljPXQuaGV1cmlzdGljfHxpLm9jdGlsZX1zLnByb3RvdHlwZS5maW5kUGF0aD1mdW5jdGlvbih0LGUsbixpLHIpe3ZhciBzLGEsbCxoPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5oZXVyaXN0aWMoTWF0aC5hYnMoZS54LXQueCksTWF0aC5hYnMoZS55LXQueSkpfS5iaW5kKHRoaXMpLHA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC54PT09ZS54fHx0Lnk9PT1lLnk/MTpNYXRoLlNRUlQyfSxmPWZ1bmN0aW9uKHQsZSxuLGkscyl7aWYoMCx0aGlzLnRpbWVMaW1pdD4wJiYobmV3IERhdGUpLmdldFRpbWUoKS1oPjFlMyp0aGlzLnRpbWVMaW1pdClyZXR1cm4gMS8wO3ZhciBhLGwsYyxnLGI9ZSt1KHQsZCkqdGhpcy53ZWlnaHQ7aWYoYj5uKXJldHVybiBiO2lmKHQ9PWQpcmV0dXJuIGlbc109W3QueCx0LnldLHQ7dmFyIHk9ci5nZXROZWlnaGJvcnModCx0aGlzLmRpYWdvbmFsTW92ZW1lbnQpO2ZvcihjPTAsYT0xLzA7Zz15W2NdOysrYyl7aWYodGhpcy50cmFja1JlY3Vyc2lvbiYmKGcucmV0YWluQ291bnQ9Zy5yZXRhaW5Db3VudCsxfHwxLCEwIT09Zy50ZXN0ZWQmJihnLnRlc3RlZD0hMCkpLChsPWYoZyxlK3AodCxnKSxuLGkscysxKSlpbnN0YW5jZW9mIG8pcmV0dXJuIGlbc109W3QueCx0LnldLGw7dGhpcy50cmFja1JlY3Vyc2lvbiYmMD09LS1nLnJldGFpbkNvdW50JiYoZy50ZXN0ZWQ9ITEpLGw8YSYmKGE9bCl9cmV0dXJuIGF9LmJpbmQodGhpcyksYz1yLmdldE5vZGVBdCh0LGUpLGQ9ci5nZXROb2RlQXQobixpKSxnPXUoYyxkKTtmb3Iocz0wOzsrK3Mpe2lmKChsPWYoYywwLGcsYT1bXSwwKSk9PT0xLzApcmV0dXJuW107aWYobCBpbnN0YW5jZW9mIG8pcmV0dXJuIGE7Zz1sfXJldHVybltdfSx0LmV4cG9ydHM9c30sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMCksbz1uKDMzKSxyPW4oMzQpLHM9bigzNSksYT1uKDM2KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuKHQ9dHx8e30pLmRpYWdvbmFsTW92ZW1lbnQ9PT1pLk5ldmVyP25ldyBvKHQpOnQuZGlhZ29uYWxNb3ZlbWVudD09PWkuQWx3YXlzP25ldyByKHQpOnQuZGlhZ29uYWxNb3ZlbWVudD09PWkuT25seVdoZW5Ob09ic3RhY2xlcz9uZXcgcyh0KTpuZXcgYSh0KX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDUpLG89bigwKTtmdW5jdGlvbiByKHQpe2kuY2FsbCh0aGlzLHQpfXIucHJvdG90eXBlPW5ldyBpLHIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXIsci5wcm90b3R5cGUuX2p1bXA9ZnVuY3Rpb24odCxlLG4saSl7dmFyIG89dGhpcy5ncmlkLHI9dC1uLHM9ZS1pO2lmKCFvLmlzV2Fsa2FibGVBdCh0LGUpKXJldHVybiBudWxsO2lmKCEwPT09dGhpcy50cmFja0p1bXBSZWN1cnNpb24mJihvLmdldE5vZGVBdCh0LGUpLnRlc3RlZD0hMCksby5nZXROb2RlQXQodCxlKT09PXRoaXMuZW5kTm9kZSlyZXR1cm5bdCxlXTtpZigwIT09cil7aWYoby5pc1dhbGthYmxlQXQodCxlLTEpJiYhby5pc1dhbGthYmxlQXQodC1yLGUtMSl8fG8uaXNXYWxrYWJsZUF0KHQsZSsxKSYmIW8uaXNXYWxrYWJsZUF0KHQtcixlKzEpKXJldHVyblt0LGVdfWVsc2V7aWYoMD09PXMpdGhyb3cgbmV3IEVycm9yKCJPbmx5IGhvcml6b250YWwgYW5kIHZlcnRpY2FsIG1vdmVtZW50cyBhcmUgYWxsb3dlZCIpO2lmKG8uaXNXYWxrYWJsZUF0KHQtMSxlKSYmIW8uaXNXYWxrYWJsZUF0KHQtMSxlLXMpfHxvLmlzV2Fsa2FibGVBdCh0KzEsZSkmJiFvLmlzV2Fsa2FibGVBdCh0KzEsZS1zKSlyZXR1cm5bdCxlXTtpZih0aGlzLl9qdW1wKHQrMSxlLHQsZSl8fHRoaXMuX2p1bXAodC0xLGUsdCxlKSlyZXR1cm5bdCxlXX1yZXR1cm4gdGhpcy5fanVtcCh0K3IsZStzLHQsZSl9LHIucHJvdG90eXBlLl9maW5kTmVpZ2hib3JzPWZ1bmN0aW9uKHQpe3ZhciBlLG4saSxyLHMsYSxsLGgsdT10LnBhcmVudCxwPXQueCxmPXQueSxjPXRoaXMuZ3JpZCxkPVtdO2lmKHUpZT11Lngsbj11LnksaT0ocC1lKS9NYXRoLm1heChNYXRoLmFicyhwLWUpLDEpLHI9KGYtbikvTWF0aC5tYXgoTWF0aC5hYnMoZi1uKSwxKSwwIT09aT8oYy5pc1dhbGthYmxlQXQocCxmLTEpJiZkLnB1c2goW3AsZi0xXSksYy5pc1dhbGthYmxlQXQocCxmKzEpJiZkLnB1c2goW3AsZisxXSksYy5pc1dhbGthYmxlQXQocCtpLGYpJiZkLnB1c2goW3AraSxmXSkpOjAhPT1yJiYoYy5pc1dhbGthYmxlQXQocC0xLGYpJiZkLnB1c2goW3AtMSxmXSksYy5pc1dhbGthYmxlQXQocCsxLGYpJiZkLnB1c2goW3ArMSxmXSksYy5pc1dhbGthYmxlQXQocCxmK3IpJiZkLnB1c2goW3AsZityXSkpO2Vsc2UgZm9yKGw9MCxoPShzPWMuZ2V0TmVpZ2hib3JzKHQsby5OZXZlcikpLmxlbmd0aDtsPGg7KytsKWE9c1tsXSxkLnB1c2goW2EueCxhLnldKTtyZXR1cm4gZH0sdC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDUpLG89bigwKTtmdW5jdGlvbiByKHQpe2kuY2FsbCh0aGlzLHQpfXIucHJvdG90eXBlPW5ldyBpLHIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXIsci5wcm90b3R5cGUuX2p1bXA9ZnVuY3Rpb24odCxlLG4saSl7dmFyIG89dGhpcy5ncmlkLHI9dC1uLHM9ZS1pO2lmKCFvLmlzV2Fsa2FibGVBdCh0LGUpKXJldHVybiBudWxsO2lmKCEwPT09dGhpcy50cmFja0p1bXBSZWN1cnNpb24mJihvLmdldE5vZGVBdCh0LGUpLnRlc3RlZD0hMCksby5nZXROb2RlQXQodCxlKT09PXRoaXMuZW5kTm9kZSlyZXR1cm5bdCxlXTtpZigwIT09ciYmMCE9PXMpe2lmKG8uaXNXYWxrYWJsZUF0KHQtcixlK3MpJiYhby5pc1dhbGthYmxlQXQodC1yLGUpfHxvLmlzV2Fsa2FibGVBdCh0K3IsZS1zKSYmIW8uaXNXYWxrYWJsZUF0KHQsZS1zKSlyZXR1cm5bdCxlXTtpZih0aGlzLl9qdW1wKHQrcixlLHQsZSl8fHRoaXMuX2p1bXAodCxlK3MsdCxlKSlyZXR1cm5bdCxlXX1lbHNlIGlmKDAhPT1yKXtpZihvLmlzV2Fsa2FibGVBdCh0K3IsZSsxKSYmIW8uaXNXYWxrYWJsZUF0KHQsZSsxKXx8by5pc1dhbGthYmxlQXQodCtyLGUtMSkmJiFvLmlzV2Fsa2FibGVBdCh0LGUtMSkpcmV0dXJuW3QsZV19ZWxzZSBpZihvLmlzV2Fsa2FibGVBdCh0KzEsZStzKSYmIW8uaXNXYWxrYWJsZUF0KHQrMSxlKXx8by5pc1dhbGthYmxlQXQodC0xLGUrcykmJiFvLmlzV2Fsa2FibGVBdCh0LTEsZSkpcmV0dXJuW3QsZV07cmV0dXJuIHRoaXMuX2p1bXAodCtyLGUrcyx0LGUpfSxyLnByb3RvdHlwZS5fZmluZE5laWdoYm9ycz1mdW5jdGlvbih0KXt2YXIgZSxuLGkscixzLGEsbCxoLHU9dC5wYXJlbnQscD10LngsZj10LnksYz10aGlzLmdyaWQsZD1bXTtpZih1KWU9dS54LG49dS55LGk9KHAtZSkvTWF0aC5tYXgoTWF0aC5hYnMocC1lKSwxKSxyPShmLW4pL01hdGgubWF4KE1hdGguYWJzKGYtbiksMSksMCE9PWkmJjAhPT1yPyhjLmlzV2Fsa2FibGVBdChwLGYrcikmJmQucHVzaChbcCxmK3JdKSxjLmlzV2Fsa2FibGVBdChwK2ksZikmJmQucHVzaChbcCtpLGZdKSxjLmlzV2Fsa2FibGVBdChwK2ksZityKSYmZC5wdXNoKFtwK2ksZityXSksYy5pc1dhbGthYmxlQXQocC1pLGYpfHxkLnB1c2goW3AtaSxmK3JdKSxjLmlzV2Fsa2FibGVBdChwLGYtcil8fGQucHVzaChbcCtpLGYtcl0pKTowPT09aT8oYy5pc1dhbGthYmxlQXQocCxmK3IpJiZkLnB1c2goW3AsZityXSksYy5pc1dhbGthYmxlQXQocCsxLGYpfHxkLnB1c2goW3ArMSxmK3JdKSxjLmlzV2Fsa2FibGVBdChwLTEsZil8fGQucHVzaChbcC0xLGYrcl0pKTooYy5pc1dhbGthYmxlQXQocCtpLGYpJiZkLnB1c2goW3AraSxmXSksYy5pc1dhbGthYmxlQXQocCxmKzEpfHxkLnB1c2goW3AraSxmKzFdKSxjLmlzV2Fsa2FibGVBdChwLGYtMSl8fGQucHVzaChbcCtpLGYtMV0pKTtlbHNlIGZvcihsPTAsaD0ocz1jLmdldE5laWdoYm9ycyh0LG8uQWx3YXlzKSkubGVuZ3RoO2w8aDsrK2wpYT1zW2xdLGQucHVzaChbYS54LGEueV0pO3JldHVybiBkfSx0LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNSksbz1uKDApO2Z1bmN0aW9uIHIodCl7aS5jYWxsKHRoaXMsdCl9ci5wcm90b3R5cGU9bmV3IGksci5wcm90b3R5cGUuY29uc3RydWN0b3I9cixyLnByb3RvdHlwZS5fanVtcD1mdW5jdGlvbih0LGUsbixpKXt2YXIgbz10aGlzLmdyaWQscj10LW4scz1lLWk7aWYoIW8uaXNXYWxrYWJsZUF0KHQsZSkpcmV0dXJuIG51bGw7aWYoITA9PT10aGlzLnRyYWNrSnVtcFJlY3Vyc2lvbiYmKG8uZ2V0Tm9kZUF0KHQsZSkudGVzdGVkPSEwKSxvLmdldE5vZGVBdCh0LGUpPT09dGhpcy5lbmROb2RlKXJldHVyblt0LGVdO2lmKDAhPT1yJiYwIT09cyl7aWYodGhpcy5fanVtcCh0K3IsZSx0LGUpfHx0aGlzLl9qdW1wKHQsZStzLHQsZSkpcmV0dXJuW3QsZV19ZWxzZSBpZigwIT09cil7aWYoby5pc1dhbGthYmxlQXQodCxlLTEpJiYhby5pc1dhbGthYmxlQXQodC1yLGUtMSl8fG8uaXNXYWxrYWJsZUF0KHQsZSsxKSYmIW8uaXNXYWxrYWJsZUF0KHQtcixlKzEpKXJldHVyblt0LGVdfWVsc2UgaWYoMCE9PXMmJihvLmlzV2Fsa2FibGVBdCh0LTEsZSkmJiFvLmlzV2Fsa2FibGVBdCh0LTEsZS1zKXx8by5pc1dhbGthYmxlQXQodCsxLGUpJiYhby5pc1dhbGthYmxlQXQodCsxLGUtcykpKXJldHVyblt0LGVdO3JldHVybiBvLmlzV2Fsa2FibGVBdCh0K3IsZSkmJm8uaXNXYWxrYWJsZUF0KHQsZStzKT90aGlzLl9qdW1wKHQrcixlK3MsdCxlKTpudWxsfSxyLnByb3RvdHlwZS5fZmluZE5laWdoYm9ycz1mdW5jdGlvbih0KXt2YXIgZSxuLGkscixzLGEsbCxoLHUscD10LnBhcmVudCxmPXQueCxjPXQueSxkPXRoaXMuZ3JpZCxnPVtdO2lmKHApe2lmKGU9cC54LG49cC55LGk9KGYtZSkvTWF0aC5tYXgoTWF0aC5hYnMoZi1lKSwxKSxyPShjLW4pL01hdGgubWF4KE1hdGguYWJzKGMtbiksMSksMCE9PWkmJjAhPT1yKWQuaXNXYWxrYWJsZUF0KGYsYytyKSYmZy5wdXNoKFtmLGMrcl0pLGQuaXNXYWxrYWJsZUF0KGYraSxjKSYmZy5wdXNoKFtmK2ksY10pLGQuaXNXYWxrYWJsZUF0KGYsYytyKSYmZC5pc1dhbGthYmxlQXQoZitpLGMpJiZnLnB1c2goW2YraSxjK3JdKTtlbHNlIGlmKDAhPT1pKXt1PWQuaXNXYWxrYWJsZUF0KGYraSxjKTt2YXIgYj1kLmlzV2Fsa2FibGVBdChmLGMrMSkseT1kLmlzV2Fsa2FibGVBdChmLGMtMSk7dSYmKGcucHVzaChbZitpLGNdKSxiJiZnLnB1c2goW2YraSxjKzFdKSx5JiZnLnB1c2goW2YraSxjLTFdKSksYiYmZy5wdXNoKFtmLGMrMV0pLHkmJmcucHVzaChbZixjLTFdKX1lbHNlIGlmKDAhPT1yKXt1PWQuaXNXYWxrYWJsZUF0KGYsYytyKTt2YXIgdj1kLmlzV2Fsa2FibGVBdChmKzEsYyksQT1kLmlzV2Fsa2FibGVBdChmLTEsYyk7dSYmKGcucHVzaChbZixjK3JdKSx2JiZnLnB1c2goW2YrMSxjK3JdKSxBJiZnLnB1c2goW2YtMSxjK3JdKSksdiYmZy5wdXNoKFtmKzEsY10pLEEmJmcucHVzaChbZi0xLGNdKX19ZWxzZSBmb3IobD0wLGg9KHM9ZC5nZXROZWlnaGJvcnModCxvLk9ubHlXaGVuTm9PYnN0YWNsZXMpKS5sZW5ndGg7bDxoOysrbClhPXNbbF0sZy5wdXNoKFthLngsYS55XSk7cmV0dXJuIGd9LHQuZXhwb3J0cz1yfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big1KSxvPW4oMCk7ZnVuY3Rpb24gcih0KXtpLmNhbGwodGhpcyx0KX1yLnByb3RvdHlwZT1uZXcgaSxyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1yLHIucHJvdG90eXBlLl9qdW1wPWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXRoaXMuZ3JpZCxyPXQtbixzPWUtaTtpZighby5pc1dhbGthYmxlQXQodCxlKSlyZXR1cm4gbnVsbDtpZighMD09PXRoaXMudHJhY2tKdW1wUmVjdXJzaW9uJiYoby5nZXROb2RlQXQodCxlKS50ZXN0ZWQ9ITApLG8uZ2V0Tm9kZUF0KHQsZSk9PT10aGlzLmVuZE5vZGUpcmV0dXJuW3QsZV07aWYoMCE9PXImJjAhPT1zKXtpZihvLmlzV2Fsa2FibGVBdCh0LXIsZStzKSYmIW8uaXNXYWxrYWJsZUF0KHQtcixlKXx8by5pc1dhbGthYmxlQXQodCtyLGUtcykmJiFvLmlzV2Fsa2FibGVBdCh0LGUtcykpcmV0dXJuW3QsZV07aWYodGhpcy5fanVtcCh0K3IsZSx0LGUpfHx0aGlzLl9qdW1wKHQsZStzLHQsZSkpcmV0dXJuW3QsZV19ZWxzZSBpZigwIT09cil7aWYoby5pc1dhbGthYmxlQXQodCtyLGUrMSkmJiFvLmlzV2Fsa2FibGVBdCh0LGUrMSl8fG8uaXNXYWxrYWJsZUF0KHQrcixlLTEpJiYhby5pc1dhbGthYmxlQXQodCxlLTEpKXJldHVyblt0LGVdfWVsc2UgaWYoby5pc1dhbGthYmxlQXQodCsxLGUrcykmJiFvLmlzV2Fsa2FibGVBdCh0KzEsZSl8fG8uaXNXYWxrYWJsZUF0KHQtMSxlK3MpJiYhby5pc1dhbGthYmxlQXQodC0xLGUpKXJldHVyblt0LGVdO3JldHVybiBvLmlzV2Fsa2FibGVBdCh0K3IsZSl8fG8uaXNXYWxrYWJsZUF0KHQsZStzKT90aGlzLl9qdW1wKHQrcixlK3MsdCxlKTpudWxsfSxyLnByb3RvdHlwZS5fZmluZE5laWdoYm9ycz1mdW5jdGlvbih0KXt2YXIgZSxuLGkscixzLGEsbCxoLHU9dC5wYXJlbnQscD10LngsZj10LnksYz10aGlzLmdyaWQsZD1bXTtpZih1KWU9dS54LG49dS55LGk9KHAtZSkvTWF0aC5tYXgoTWF0aC5hYnMocC1lKSwxKSxyPShmLW4pL01hdGgubWF4KE1hdGguYWJzKGYtbiksMSksMCE9PWkmJjAhPT1yPyhjLmlzV2Fsa2FibGVBdChwLGYrcikmJmQucHVzaChbcCxmK3JdKSxjLmlzV2Fsa2FibGVBdChwK2ksZikmJmQucHVzaChbcCtpLGZdKSwoYy5pc1dhbGthYmxlQXQocCxmK3IpfHxjLmlzV2Fsa2FibGVBdChwK2ksZikpJiZkLnB1c2goW3AraSxmK3JdKSwhYy5pc1dhbGthYmxlQXQocC1pLGYpJiZjLmlzV2Fsa2FibGVBdChwLGYrcikmJmQucHVzaChbcC1pLGYrcl0pLCFjLmlzV2Fsa2FibGVBdChwLGYtcikmJmMuaXNXYWxrYWJsZUF0KHAraSxmKSYmZC5wdXNoKFtwK2ksZi1yXSkpOjA9PT1pP2MuaXNXYWxrYWJsZUF0KHAsZityKSYmKGQucHVzaChbcCxmK3JdKSxjLmlzV2Fsa2FibGVBdChwKzEsZil8fGQucHVzaChbcCsxLGYrcl0pLGMuaXNXYWxrYWJsZUF0KHAtMSxmKXx8ZC5wdXNoKFtwLTEsZityXSkpOmMuaXNXYWxrYWJsZUF0KHAraSxmKSYmKGQucHVzaChbcCtpLGZdKSxjLmlzV2Fsa2FibGVBdChwLGYrMSl8fGQucHVzaChbcCtpLGYrMV0pLGMuaXNXYWxrYWJsZUF0KHAsZi0xKXx8ZC5wdXNoKFtwK2ksZi0xXSkpO2Vsc2UgZm9yKGw9MCxoPShzPWMuZ2V0TmVpZ2hib3JzKHQsby5JZkF0TW9zdE9uZU9ic3RhY2xlKSkubGVuZ3RoO2w8aDsrK2wpYT1zW2xdLGQucHVzaChbYS54LGEueV0pO3JldHVybiBkfSx0LmV4cG9ydHM9cn1dKTs=");var e=config.doodads.map(function(t){return{x:t[0],y:t[1],scale:t[3]}});this.worker.postMessage(["setMountains",e]),this.worker.onmessage=function(e){return t.onWorkerMessage(e)},this.worker.onerror=function(e){return t.onError(e)}}return t.prototype.findPath=function(t,e,i,s){this.isReady&&(this.lastRequestID++,this.findPathCallback=i,this.errorCallback=s,this.worker.postMessage(["findPath",{x:t.x,y:t.y},{x:e.x,y:e.y},this.lastRequestID]))},t.prototype.destroy=function(){this.worker&&(this.worker.terminate(),this.worker=null)},t.prototype.onWorkerMessage=function(t){var e=t.data,i=e[0];if("ERROR"===i)s.Spatie.log("Error calling worker."),this.onError(e.slice(1));else if("READY"===i)this.isReady=!0;else if("LOG"===i)console.log.apply(console,e.slice(1));else if("findPath"===i){var o=e[1];if(e[2]===this.lastRequestID){var a=this.findPathCallback;this.findPathCallback=null,this.errorCallback=null,a(o)}}},t.prototype.onError=function(t){var e=this.errorCallback;this.errorCallback=null,this.findPathCallback=null,e&&e(t)},t}();e.BotNavigationHub=o,window.BotNavigationClient=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(2),o=["ABYDOCOMIST","BEDSWERVER","BESPAWLER","BOBOLYNE","CUMBERWORLD","DALCOP","DEW-BEATER","DORBEL","DRATE-POKE","DRIGGLE-DRAGGLE","FOPDOODLE","FUSTYLUGS","FUSTILARIAN","GILLIE-WET-FOOT","GNASHGAB","GOBERMOUCH","GOWPENFUL-O'-ANYTHING","KLAZOMANIAC","LEASING-MONGER","LOITER-SACK","LUBBERWORT","MUCK-SPOUT","MUMBLECRUST","QUISBY","RAGGABRASH","RAKEFIRE","ROIDERBANKS","SADDLE-GOOSE","SCOBBERLOTCHER","SKELPIE-LIMMER","SMELL-FEAST","SMELLFUNGUS","SNOUTBAND","SORNER","STAMPCRAB","STYMPHALIST","TALLOWCATCH","TRIPTAKER","WANDOUGHT","WHIFFLE-WHAFFLE","YALDSON","ZOILIST"],a=["Arrogant","Big-headed","Self-centred","Vain","Boastful","Pompous","Callous","Cynical","Overcritical","Patronising","Aloof","Impolite","Inconsiderate","Thoughtless","Confrontational","Defensive","Hostile","Belligerent","Bitchy","Nasty","Bossy","Cruel","Domineering","Deceitful","Dishonest","Machiavellian","Sneaky","Untrustworthy","Dogmatic","Inflexible","Intolerant","Narrow-minded","Stubborn","Obstinate","Pig-headed","Fussy","Indiscreet","Tactless","Unpredictable","Vague","Impatient","Unreliable","Jealous","Possessive","Resentful","Secretive","Idle","Careless","Irresponsible","Untidy","Cowardly","Foolish","Gullible","Indecisive","Weak-willed","Quick-tempered","Grumpy","Moody","Pessimistic","Sullen","Touchy","Overemotional","Clingy","Finicky","Silly","Vulgar"];e.getInsult=function(){var t=s.Spatie.getRandomNumber(0,o.length+1),e=s.Spatie.getRandomNumber(0,a.length+1);return a[e]+" "+o[t]}}]);